#!/usr/bin/env python3
# -*- coding: utf-8 -*-
# --------------------------------------------------------------
#   Bot ¬´Farm¬ª ‚Äì –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω, –¥–æ—Ä–∞–±–æ—Ç–∞–Ω –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω:
#   ‚Ä¢ –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è—Ö –∏ X‚Äë—Ñ–µ—Ä–º–µ.
#   ‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω –∂—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–∞ ‚Äì –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å
#     –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –∏–≥—Ä–æ–∫–æ–≤ (–ø–æ–∫—É–ø–∫–∞, –∫–æ—Ä–º–ª–µ–Ω–∏–µ, –ø—Ä–æ–¥–∞–∂–∞ –∏ —Ç.–¥.).
#   ‚Ä¢ –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ (–º–µ–Ω—é, —Ñ–µ—Ä–º–∞, –º–∞–≥–∞–∑–∏–Ω, —Å—Ç–∞—Ç—É—Å –∏ —Ç.–¥.)
#     —Ç–µ–ø–µ—Ä—å –≤—ã–≤–æ–¥–∏—Ç—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–¥ —Ç–µ–∫—Å—Ç–æ–º.
# --------------------------------------------------------------
import argparse
import logging
import random
import re
import time
import sqlite3
from typing import Any, Dict, List, Tuple

from telegram import (
    InlineKeyboardButton,
    InlineKeyboardMarkup,
    InputMediaPhoto,
    Update,
)
from telegram.ext import (
    ApplicationBuilder,
    CallbackQueryHandler,
    CommandHandler,
    ContextTypes,
    MessageHandler,
    filters,
)

# ----------------------------------------------------------------------
#   –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
# ----------------------------------------------------------------------
TOKEN = "8137596673:AAGePL-4AZQHPIXLruyWkOQwDLfW_Hycudk"          # –≤–∞—à —Ç–æ–∫–µ–Ω
DB_PATH = "farm_bot.db"
MAX_INT = 9_223_372_036_854_775_807
HUNGER_TIME = 10 * 3600          # 10‚ÄØ—á –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
FOOD_PRICE = 500                # –æ–±—ã—á–Ω—ã–π –∫–æ—Ä–º
AUTUMN_FOOD_PRICE = 1000        # –æ—Å–µ–Ω–Ω–∏–π –∫–æ—Ä–º
BASE_UPGRADE_COST = 5_000_000    # —É–ª—É—á—à–µ–Ω–∏–µ –±–∞–∑—ã
BASE_LIMIT_STEP = 5               # —à–∞–≥ —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ –ø—Ä–∏ —É–ª—É—á—à–µ–Ω–∏–∏ –±–∞–∑—ã
SEASON_LENGTH = 60 * 24 * 3600   # 60 –¥–Ω–µ–π ‚Üí –æ–¥–∏–Ω ¬´—Å–µ–∑–æ–Ω¬ª
CHANNEL_USERNAME = "spiderfarminfo"
CHANNEL_ID = -1001234567890
CHAT_ID = -4966660960
CHAT_LINK = "https://t.me/+tjqmdwVMjtYxMTU6"
CHANNEL_LINK = "https://t.me/spiderfarminfo"

# –ö–∞—Ä—Ç–∏–Ω–∫–∏
MAIN_MENU_IMG = "https://i.postimg.cc/fb1TQF6W/5355070803995131046.jpg"
AUTUMN_EVENT_IMG = "https://i.postimg.cc/fb1TQF6W/5355070803995131046.jpg"

# ----------------------------------------------------------------------
#   –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–¥–µ–ª–æ–≤ 
# ----------------------------------------------------------------------
SECTION_IMAGES: Dict[str, str] = {
    "about": "https://i.postimg.cc/BZ580SNj/5355070803995130961.jpg",
    "farm": "https://i.postimg.cc/dVf3BLQx/5355070803995130963.jpg",
    "shop": "https://i.postimg.cc/cHyJp2n7/5355070803995130964.jpg",
    "farmers": "https://i.postimg.cc/28MN9vvh/5355070803995130971.jpg",
    "status": "https://i.postimg.cc/2jPf2hnv/5355070803995130978.jpg",
    "coins": "https://i.postimg.cc/SxnCk0JH/5355070803995130993.jpg",
    "casino": "https://i.postimg.cc/zvZBKMj2/5355070803995131009.jpg",
    "promo": "https://i.postimg.cc/kXCG50DB/5355070803995131030.jpg",
    "autumn": AUTUMN_EVENT_IMG,
    "admin": "https://i.postimg.cc/fb1TQF6W/5355070803995131046.jpg",
    "logs": "https://i.postimg.cc/fb1TQF6W/5355070803995131046.jpg",
    "top": "https://i.postimg.cc/mg2rY7Y4/5355070803995131023.jpg",
}
# ----------------------------------------------------------------------
#   –ö–∞—Ä—Ç–∏–Ω–∫–∏ –ø–∏—Ç–æ–º—Ü–µ–≤ ‚Üê NEW
# ----------------------------------------------------------------------
ANIMAL_IMAGES: Dict[str, str] = {
    "chickens":   "https://i.postimg.cc/sXhBfbdg/137158096.jpg",
    "cows":       "https://i.postimg.cc/rsT0gP5b/cows.jpg",
    "pigs":       "https://i.postimg.cc/4yM8VbJw/pigs.jpg",
    "ducks":      "https://i.postimg.cc/7ZxM3W9v/ducks.jpg",
    "geese":      "https://i.postimg.cc/8PcLZf4S/geese.jpg",
    "turkeys":    "https://i.postimg.cc/7tLz8jJ5/turkeys.jpg",
    "rabbits":    "https://i.postimg.cc/3N0gkKpF/rabbits.jpg",
    "rats":       "https://i.postimg.cc/2jR6V8gH/rats.jpg",
    "hamsters":   "https://i.postimg.cc/0yH4pT7L/hamsters.jpg",
    "goats":      "https://i.postimg.cc/6tWfJ9K5/goats.jpg",
    "sheep":      "https://i.postimg.cc/5tqV6c33/sheep.jpg",
    "donkeys":    "https://i.postimg.cc/44MkpV6G/donkeys.jpg",
    "mules":      "https://i.postimg.cc/gc7xgWQp/mules.jpg",
    "camels":     "https://i.postimg.cc/6z3WqRzK/camels.jpg",
    "alpacas":    "https://i.postimg.cc/3J6L2ZtV/alpacas.jpg",
    "llamas":     "https://i.postimg.cc/6p3d3VbK/llamas.jpg",
    "yak":        "https://i.postimg.cc/5N5Tzq9g/yak.jpg",
    "buffalo":    "https://i.postimg.cc/6tWfJ9K5/buffalo.jpg",
    "ferrets":    "https://i.postimg.cc/2jR6V8gH/ferrets.jpg",
    "otters":     "https://i.postimg.cc/0yH4pT7L/otters.jpg",
    # ‚Ä¶ —Å—é–¥–∞ –∂–µ –¥–æ–±–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö (rare, epic, mystic, secret, ultra –∏ —Ç.–¥.) ‚Ä¶
    # –ü—Ä–∏–º–µ—Ä:
    "horses":     "https://i.postimg.cc/6qh5THc7/horses.jpg",
    "dragons":    "https://i.postimg.cc/6qh5THc7/dragons.jpg",
    # –ï—Å–ª–∏ —Å—Å—ã–ª–∫–∏ –Ω–µ—Ç ‚Äì –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (MAIN_MENU_IMG)
}
# ----------------------------------------------------------------------
logging.basicConfig(
    format="%(asctime)s - %(name)s - %(levelname)s - %(message)s",
    level=logging.INFO,
)
log = logging.getLogger(__name__)

# ----------------------------------------------------------------------
#   –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
# ----------------------------------------------------------------------
conn = sqlite3.connect(DB_PATH, check_same_thread=False)
conn.row_factory = sqlite3.Row
cur = conn.cursor()


def _execute(sql: str, params: Tuple = ()) -> None:
    """–£–ø—Ä–æ—â—ë–Ω–Ω—ã–π wrapper‚Äë–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤."""
    cur.execute(sql, params)
    conn.commit()


def init_db() -> None:
    """–°–æ–∑–¥–∞—ë—Ç –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã (–µ—Å–ª–∏ –∏—Ö –µ—â—ë –Ω–µ—Ç) –∏ –¥–µ–ª–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏—é."""
    # ---------- users ----------
    _execute(
        """
        CREATE TABLE IF NOT EXISTS users (
            user_id INTEGER PRIMARY KEY,
            username TEXT,
            coins INTEGER DEFAULT 0,
            feed INTEGER DEFAULT 0,
            autumn_feed INTEGER DEFAULT 0,
            weekly_coins INTEGER DEFAULT 0,
            last_reset INTEGER DEFAULT 0,
            secret_spider INTEGER DEFAULT 0,
            click_count INTEGER DEFAULT 0,
            last_click_time INTEGER DEFAULT 0,
            feed_bonus_end INTEGER DEFAULT 0,
            autumn_bonus_end INTEGER DEFAULT 0,
            tickets INTEGER DEFAULT 0,
            last_ticket_time INTEGER DEFAULT 0,
            reputation INTEGER DEFAULT 0,
            custom_income INTEGER DEFAULT 0,
            pet_limit INTEGER DEFAULT 200,
            base_level INTEGER DEFAULT 0,
            subscribe_claimed INTEGER DEFAULT 0,
            chat_claimed INTEGER DEFAULT 0,
            click_reward_last INTEGER DEFAULT 0,
            referred_by INTEGER DEFAULT 0
        );
        """
    )
    # ---------- admin_users ----------
    _execute(
        """
        CREATE TABLE IF NOT EXISTS admin_users (
            user_id INTEGER PRIMARY KEY
        );
        """
    )
    # ---------- global_settings ----------
    _execute(
        """
        CREATE TABLE IF NOT EXISTS global_settings (
            id INTEGER PRIMARY KEY,
            global_bonus_active INTEGER DEFAULT 0,
            autumn_event_active INTEGER DEFAULT 0,
            season_start INTEGER DEFAULT 0,
            season_number INTEGER DEFAULT 1
        );
        """
    )
    # —Å–æ–∑–¥–∞—ë–º —Å—Ç—Ä–æ–∫—É id=1, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
    cur.execute("SELECT 1 FROM global_settings WHERE id = 1")
    if cur.fetchone() is None:
        _execute(
            """
            INSERT INTO global_settings (id, global_bonus_active, autumn_event_active,
                                         season_start, season_number)
            VALUES (1,0,0,?,1)
            """,
            (int(time.time()),),
        )
    else:
        cur.execute("SELECT season_start FROM global_settings WHERE id = 1")
        row = cur.fetchone()
        if row["season_start"] == 0:
            _execute(
                "UPDATE global_settings SET season_start = ? WHERE id = 1",
                (int(time.time()),),
            )
    # ---------- pet_last_fed ----------
    _execute(
        """
        CREATE TABLE IF NOT EXISTS pet_last_fed (
            user_id INTEGER,
            pet_field TEXT,
            last_fed INTEGER,
            PRIMARY KEY (user_id, pet_field)
        );
        """
    )
    # ---------- promo_codes ----------
    _execute(
        """
        CREATE TABLE IF NOT EXISTS promo_codes (
            code TEXT PRIMARY KEY,
            coins INTEGER NOT NULL,
            pet_field TEXT,
            pet_qty INTEGER DEFAULT 0,
            max_uses INTEGER DEFAULT 1,
            used INTEGER DEFAULT 0
        );
        """
    )
    # ---------- decorations ----------
    _execute(
        """
        CREATE TABLE IF NOT EXISTS decorations (
            user_id INTEGER,
            decor_type TEXT,
            level INTEGER DEFAULT 0,
            PRIMARY KEY (user_id, decor_type)
        );
        """
    )
    # ---------- lottery ----------
    _execute(
        """
        CREATE TABLE IF NOT EXISTS lottery (
            user_id INTEGER PRIMARY KEY,
            tickets INTEGER DEFAULT 0
        );
        """
    )
    # ---------- boosters ----------
    _execute(
        """
        CREATE TABLE IF NOT EXISTS boosters (
            user_id INTEGER PRIMARY KEY,
            multiplier REAL DEFAULT 1.0,
            expires INTEGER DEFAULT 0
        );
        """
    )
    # ---------- farmers ----------
    _execute(
        """
        CREATE TABLE IF NOT EXISTS farmers (
            user_id INTEGER,
            farmer_type TEXT,
            qty INTEGER DEFAULT 0,
            PRIMARY KEY (user_id, farmer_type)
        );
        """
    )
    # ---------- admin_logs ----------
    _execute(
        """
        CREATE TABLE IF NOT EXISTS admin_logs (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            user_id INTEGER,
            action TEXT,
            ts INTEGER
        );
        """
    )
    conn.commit()


def ensure_user_columns() -> None:
    """–î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ users (–º–∏–≥—Ä–∞—Ü–∏—è)."""
    cur.execute("PRAGMA table_info(users);")
    existing = {row["name"] for row in cur.fetchall()}
    needed = {
        "feed",
        "autumn_feed",
        "weekly_coins",
        "last_reset",
        "secret_spider",
        "click_count",
        "last_click_time",
        "feed_bonus_end",
        "autumn_bonus_end",
        "tickets",
        "last_ticket_time",
        "reputation",
        "custom_income",
        "pet_limit",
        "base_level",
        "subscribe_claimed",
        "chat_claimed",
        "click_reward_last",
        "referred_by",
    }
    for col in needed:
        if col not in existing:
            log.info("Adding column %s to users", col)
            _execute(f"ALTER TABLE users ADD COLUMN {col} INTEGER DEFAULT 0")


def ensure_animal_columns() -> None:
    """–°–æ–∑–¥–∞—ë—Ç –∫–æ–ª–æ–Ω–∫–∏‚Äë–ø–∏—Ç–æ–º—Ü—ã, –µ—Å–ª–∏ –∏—Ö –µ—â—ë –Ω–µ—Ç."""
    cur.execute("PRAGMA table_info(users);")
    existing = {row["name"] for row in cur.fetchall()}
    for field, *_ in ANIMAL_CONFIG:
        if field not in existing:
            log.info("Adding animal column %s", field)
            _execute(f"ALTER TABLE users ADD COLUMN {field} INTEGER DEFAULT 0")


def ensure_global_settings_columns() -> None:
    """–ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ç–æ–ª–±—Ü–æ–≤ –≤ global_settings (–Ω–∞ —Å–ª—É—á–∞–π –±—É–¥—É—â–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π)."""
    cur.execute("PRAGMA table_info(global_settings);")
    existing = {row["name"] for row in cur.fetchall()}
    for col in ("autumn_event_active", "season_start", "season_number"):
        if col not in existing:
            log.info("Adding column %s to global_settings", col)
            default = 0 if col != "season_number" else 1
            _execute(
                f"ALTER TABLE global_settings ADD COLUMN {col} INTEGER DEFAULT {default}"
            )


def ensure_promo_columns() -> None:
    """–ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∫–æ–ª–æ–Ω–∫–∞ `used` –≤ promo_codes –∏ –¥–æ–±–∞–≤–ª—è–µ–º –µ—ë –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏."""
    cur.execute("PRAGMA table_info(promo_codes);")
    cols = {row["name"] for row in cur.fetchall()}
    if "used" not in cols:
        log.info("Adding column `used` to promo_codes")
        _execute("ALTER TABLE promo_codes ADD COLUMN used INTEGER DEFAULT 0")


# ----------------------------------------------------------------------
#   –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã
# ----------------------------------------------------------------------
def add_admins() -> None:
    admin_ids = [7852721487]          # –≤–∞—à Telegram‚ÄëID
    for aid in admin_ids:
        _execute(
            "INSERT OR IGNORE INTO admin_users (user_id) VALUES (?)",
            (aid,),
        )


def is_admin(user_id: int) -> bool:
    cur.execute("SELECT 1 FROM admin_users WHERE user_id = ?", (user_id,))
    return cur.fetchone() is not None


def log_user_action(user_id: int, action: str) -> None:
    """–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ –∏–≥—Ä–æ–∫–∞ –≤ –∂—É—Ä–Ω–∞–ª –∞–¥–º–∏–Ω–∞."""
    _execute(
        "INSERT INTO admin_logs (user_id, action, ts) VALUES (?,?,?)",
        (user_id, action, int(time.time())),
    )


# ----------------------------------------------------------------------
#   –£—Ç–∏–ª–∏—Ç—ã
# ----------------------------------------------------------------------
def format_num(n: int) -> str:
    """–ß–∏—Å–ª–æ —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º —Ç—ã—Å—è—á (—Ç–æ—á–∫–∞)."""
    return f"{n:,}".replace(",", ".")


def _safe_int(value: Any) -> int:
    if isinstance(value, bool):
        return int(value)
    if isinstance(value, (float, int)):
        v = int(value)
        return v if v <= MAX_INT else MAX_INT
    raise ValueError("–ù–µ —á–∏—Å–ª–æ")


def update_user(user_id: int, **kwargs: Any) -> None:
    """–û–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—è."""
    if not kwargs:
        return
    set_clause = ", ".join(f"{k}=?" for k in kwargs)
    vals = [
        _safe_int(v) if isinstance(v, (int, float, bool)) else v
        for v in kwargs.values()
    ]
    vals.append(user_id)
    _execute(f"UPDATE users SET {set_clause} WHERE user_id = ?", tuple(vals))


def get_user(user_id: int) -> sqlite3.Row:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–ø–∏—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–æ–∑–¥–∞—ë—Ç –µ—ë –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏."""
    cur.execute("SELECT * FROM users WHERE user_id = ?", (user_id,))
    row = cur.fetchone()
    if not row:
        _execute("INSERT INTO users (user_id) VALUES (?)", (user_id,))
        cur.execute("SELECT * FROM users WHERE user_id = ?", (user_id,))
        row = cur.fetchone()
    # ¬´–õ–µ—Ç—É—á–µ–µ¬ª –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–æ–ª–æ–Ω–æ–∫, –µ—Å–ª–∏ –æ–Ω–∏ –≤–¥—Ä—É–≥ –ø–æ—è–≤—è—Ç—Å—è –ø–æ–∑–∂–µ
    for field, *_ in ANIMAL_CONFIG:
        if field not in row.keys():
            _execute(f"ALTER TABLE users ADD COLUMN {field} INTEGER DEFAULT 0")
            cur.execute("SELECT * FROM users WHERE user_id = ?", (user_id,))
            row = cur.fetchone()
            break
    return row


def set_pet_last_fed(user_id: int, pet_field: str, timestamp: int) -> None:
    _execute(
        """
        INSERT INTO pet_last_fed (user_id, pet_field, last_fed)
        VALUES (?,?,?)
        ON CONFLICT(user_id, pet_field) DO UPDATE SET last_fed=excluded.last_fed
        """,
        (user_id, pet_field, timestamp),
    )


def get_pet_last_fed(user_id: int, pet_field: str) -> int | None:
    cur.execute(
        "SELECT last_fed FROM pet_last_fed WHERE user_id = ? AND pet_field = ?",
        (user_id, pet_field),
    )
    row = cur.fetchone()
    return row["last_fed"] if row else None


def delete_pet_last_fed(user_id: int, pet_field: str) -> None:
    _execute(
        "DELETE FROM pet_last_fed WHERE user_id = ? AND pet_field = ?",
        (user_id, pet_field),
    )


# ----------------------------------------------------------------------
#   –ü–∏—Ç–æ–º—Ü—ã, —Ü–µ–Ω—ã –∏ –¥–æ—Ö–æ–¥ (–¥–æ—Ö–æ–¥ = income_per_minute)
# ----------------------------------------------------------------------
# (field_name, income_per_minute, emoji, full_name, class, price, description)
ANIMAL_CONFIG: List[Tuple[str, int, str, str, str, int, str]] = [
    # ------------------- COMMON -------------------
    ("chickens",      2, "üêî", "–ö—É—Ä—ã",               "common",  200,
        "–ö–æ—Ä–º—è—Ç —Å–µ–±—è –∑–µ—Ä–Ω–æ–º –∏ –ø—Ä–∏–Ω–æ—Å—è—Ç –Ω–µ–±–æ–ª—å—à–æ–π –¥–æ—Ö–æ–¥."),
    ("cows",          4, "üêÑ", "–ö–æ—Ä–æ–≤—ã",             "common",  500,
        "–ú–æ–ª–æ–∫–æ —ç—Ç–∏—Ö –∫–æ—Ä–æ–≤ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –∑–æ–ª–æ—Ç–æ–π —Å—ã—Ä."),
    ("pigs",          6, "üêñ", "–°–≤–∏–Ω—å–∏",             "common",  800,
        "–õ—é–±—è—Ç –∫–æ–ø–∞—Ç—å, –∏–Ω–æ–≥–¥–∞ –Ω–∞—Ö–æ–¥—è—Ç –∑–∞–±—ã—Ç—ã–µ –º–æ–Ω–µ—Ç—ã."),
    ("ducks",         1, "ü¶Ü", "–£—Ç–∫–∏",               "common",  150,
        "–ö—Ä—è–∫–∞—é—Ç —Ç–∞–∫ –≥—Ä–æ–º–∫–æ, —á—Ç–æ –¥–∞–∂–µ –≤–æ–ª–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –ø–æ—Å–ª—É—à–∞—Ç—å."),
    ("geese",         2, "ü¶¢", "–ì—É—Å–∏",               "common",  250,
        "–û—Ö—Ä–∞–Ω—è—é—Ç –¥–≤–æ—Ä, –∞ –∏—Ö –ø–µ—Ä—å—è —Ü–µ–Ω—è—Ç—Å—è –≤ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —Ä–∏—Ç—É–∞–ª–∞—Ö."),
    ("turkeys",       2, "ü¶É", "–ò–Ω–¥–µ–π–∫–∏",            "common",  300,
        "–ë–ª–∞–≥–æ–¥–∞—Ä–Ω—ã –∑–∞ –∫–∞–∂–¥—ã–π –∫—Ä–∏–∫, –ø—Ä–µ–≤—Ä–∞—â–∞—è –µ–≥–æ –≤ –Ω–µ–±–æ–ª—å—à—É—é –ø—Ä–∏–±—ã–ª—å."),
    ("rabbits",       1, "üêá", "–ö—Ä–æ–ª–∏–∫–∏",            "common",  120,
        "–û—Å—Ç–∞–≤–ª—è—é—Ç –∑–æ–ª–æ—Ç—ã–µ –º–æ—Ä–∫–æ–≤–∫–∏, –µ—Å–ª–∏ –∏—Ö –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∫–æ—Ä–º–∏—Ç—å."),
    ("rats",          1, "üêÄ", "–ö—Ä—ã—Å—ã",              "common",  100,
        "–°–∫–æ–ª—å–∑—è—Ç –ø–æ —Å—Ç–µ–Ω–∞–º, –∏–Ω–æ–≥–¥–∞ –ø—Ä–∏–Ω–æ—Å—è—Ç —É–¥–∞—á—É."),
    ("hamsters",      1, "üêπ", "–•–æ–º—è–∫–∏",             "common",  130,
        "–ö—Ä—É—Ç—è—Ç—Å—è –≤ –∫–æ–ª–µ—Å–µ, –≥–µ–Ω–µ—Ä–∏—Ä—É—è –Ω–µ–±–æ–ª—å—à–∏–µ –ø–æ—Ä—Ü–∏–∏ —ç–Ω–µ—Ä–≥–∏–∏."),
    ("goats",         4, "üêê", "–ö–æ–∑—ã",               "common",  550,
        "–ñ—É—é—Ç –≤—Å—ë –ø–æ–¥—Ä—è–¥, –≤ —Ç–æ–º —á–∏—Å–ª–µ —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã."),
    ("sheep",         4, "üêë", "–û–≤—Ü—ã",               "common",  540,
        "–ú—è–≥–∫–æ –±–ª–µ—é—Ç, –∏—Ö —à–µ—Ä—Å—Ç—å –ø—Ä–æ–¥–∞—ë—Ç—Å—è –≤ –≤–∏–¥–µ –∑–æ–ª–æ—Ç–æ–π –ø—Ä—è–∂–∏."),
    ("donkeys",       2, "üê¥", "–û—Å–ª—ã",               "common",  400,
        "–¢–µ—Ä–ø–µ–ª–∏–≤–æ —Ç—è–Ω—É—Ç —Ç–µ–ª–µ–∂–∫–∏, –ø—Ä–∏–Ω–æ—Å—è –Ω–µ–±–æ–ª—å—à—É—é –ø—Ä–∏–±—ã–ª—å."),
    ("mules",         3, "üê¥", "–ú—É–ª—ã",               "common",  450,
        "–°–∏–ª—å–Ω–µ–µ –æ—Å–ª–æ–≤, –∏—Ö –≤–æ–ø–ª–∏ –æ—Ç–ø—É–≥–∏–≤–∞—é—Ç –≤–æ—Ä–æ–≤."),
    ("camels",        5, "üê™", "–í–µ—Ä–±–ª—é–¥—ã",           "common",  700,
        "–•—Ä–∞–Ω—è—Ç –≤–æ–¥—É –≤ –≥–æ—Ä–±–∞—Ö, –∏—Ö —à–∏–ø—ã –∏–Ω–æ–≥–¥–∞ –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –∫–∞–º–Ω–∏."),
    ("alpacas",       5, "ü¶ô", "–ê–ª—å–ø–∞–∫–∏",            "common",  650,
        "–ü—É—à–∏—Å—Ç—ã–µ —Å–æ–∑–¥–∞–Ω–∏—è, –∏—Ö —à–µ—Ä—Å—Ç—å —Ü–µ–Ω–∏—Ç—Å—è –≤ –¥–æ—Ä–æ–≥–∏—Ö –≥–∞–ª–µ—Ä–µ—è—Ö."),
    ("llamas",        5, "ü¶ô", "–õ–∞–º—ã",               "common",  660,
        "–õ—é–±—è—Ç –ø–æ–¥–±—Ä–∞—Å—ã–≤–∞—Ç—å –∫–∞–º–Ω–∏ –≤ —Å—Ç–æ—Ä–æ–Ω—É –Ω–µ–¥–æ–±—Ä–æ–∂–µ–ª–∞—Ç–µ–ª–µ–π."),
    ("yak",           6, "üêÇ", "–Ø–∫",                 "common",  750,
        "–ú–æ–≥—É—Ç –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –º–æ–ª–æ–∫–æ –≤ –∑–æ–ª–æ—Ç–æ–π —ç–ª–∏–∫—Å–∏—Ä."),
    ("buffalo",       7, "üêÉ", "–ë—É–π–≤–æ–ª",             "common",  900,
        "–ì—Ä–æ–º–∫–æ —Ä—ã—á–∞—Ç, –∫–æ–≥–¥–∞ —Å–æ–±–∏—Ä–∞—é—Ç —É—Ä–æ–∂–∞–π, –ø–æ–≤—ã—à–∞—è –¥–æ—Ö–æ–¥."),
    ("ferrets",       2, "ü¶¶", "–•–æ—Ä—ë–∫",              "common",  180,
        "–õ—é–±—è—Ç –ø—Ä—è—Ç–∞—Ç—å—Å—è –≤ –Ω–æ—Ä–∞—Ö, –∏–Ω–æ–≥–¥–∞ –Ω–∞—Ö–æ–¥—è –∑–∞–±—ã—Ç—ã–µ –º–æ–Ω–µ—Ç—ã."),
    ("otters",        3, "ü¶¶", "–í—ã–¥—Ä–∞",              "common",  200,
        "–ü–ª–∞–≤–∞—é—Ç –≤ —Ä–µ–∫–∞—Ö, —Å–æ–±–∏—Ä–∞—è —Ä–µ–¥–∫–∏–µ —Ä–∞–∫—É—à–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–¥–∞—é—Ç—Å—è –∑–∞ –º–æ–Ω–µ—Ç—ã."),
    # ------------------- RARE -------------------
    ("horses",       70, "üêé", "–õ–æ—à–∞–¥–∏",            "rare",    5_000,
        "–ë—ã—Å—Ç—Ä—ã–µ –∏ –≥—Ä–∞—Ü–∏–æ–∑–Ω—ã–µ, –∏—Ö –≥—Ä–∏–≤—ã –∏–Ω–æ–≥–¥–∞ –±–ª–µ—Å—Ç—è—Ç –∑–æ–ª–æ—Ç–æ–π –ø—ã–ª—å—é."),
    ("sheep_rare",   70, "üêë", "–û–≤—Ü—ã‚Äë—Ä–µ–¥–∫–∏–µ",       "rare",    5_200,
        "–ò–º–µ—é—Ç –∑–æ–ª–æ—Ç—É—é —à–µ—Ä—Å—Ç—å, –∏–∑ –∫–æ—Ç–æ—Ä–æ–π —à—å—é—Ç –º–∞–Ω—Ç–∏—é –±–æ–≥–∞—Ç—Å—Ç–≤–∞."),
    ("goats_rare",   55, "üêê", "–ö–æ–∑—ã‚Äë—Ä–µ–¥–∫–∏–µ",       "rare",    4_800,
        "–° –∏—Ö —Ä–æ–≥–æ–≤ –ø–∞–¥–∞–µ—Ç –∑–æ–ª–æ—Ç–æ–π –¥–æ–∂–¥—å —Ä–∞–∑ –≤ –º–µ—Å—è—Ü."),
    ("alpacas_rare", 65, "ü¶ô", "–ê–ª—å–ø–∞–∫–∏‚Äë—Ä–µ–¥–∫–∏–µ",    "rare",    6_300,
        "–ò—Ö –º—è–≥–∫–∞—è —à–µ—Ä—Å—Ç—å —Å–ø–æ—Å–æ–±–Ω–∞ –≤–ø–∏—Ç–∞—Ç—å –º–∞–≥–∏—é, –ø—Ä–µ–≤—Ä–∞—â–∞—è –µ—ë –≤ –º–æ–Ω–µ—Ç—ã."),
    ("llamas_rare",  65, "ü¶ô", "–õ–∞–º—ã‚Äë—Ä–µ–¥–∫–∏–µ",       "rare",    6_400,
        "–û—Ö—Ä–∞–Ω—è—é—Ç —Ç–∞–π–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—ã –≤ –ø–æ–¥–∑–µ–º–µ–ª—å—è—Ö, –≥–¥–µ —Å–ø—Ä—è—Ç–∞–Ω—ã —Å–æ–∫—Ä–æ–≤–∏—â–∞."),
    ("camels_rare",  75, "üê™", "–í–µ—Ä–±–ª—é–¥—ã‚Äë—Ä–µ–¥–∫–∏–µ",   "rare",    7_200,
        "–ò—Ö –≥–æ—Ä–±—ã –ø–æ–ª–Ω—ã –¥—Ä–µ–≤–Ω–∏—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤, –ø—Ä–æ–¥–∞—é—â–∏—Ö—Å—è –∑–∞ –±–æ–ª—å—à–∏–µ —Å—É–º–º—ã."),
    ("yaks_rare",    85, "üêÇ", "–Ø–∫‚Äë—Ä–µ–¥–∫–∏–µ",         "rare",    8_000,
        "–°–∏–ª—å–Ω—ã–µ, –∫–∞–∫ –≥–æ—Ä–Ω—ã–µ –≤–µ—Ç—Ä—ã, –∏—Ö –º–æ–ª–æ–∫–æ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —á–∏—Å—Ç—ã–π –∑–æ–ª–æ—Ç–æ–π —Å–æ–∫."),
    ("buffalo_rare", 95, "üêÉ", "–ë—É–π–≤–æ–ª‚Äë—Ä–µ–¥–∫–∏–π",     "rare",    9_500,
        "–ì—Ä–æ–º–∫–æ —Ä—ã—á–∞—Ç, –∫–æ–≥–¥–∞ —Å–æ–±–∏—Ä–∞—é—Ç —É—Ä–æ–∂–∞–π, —É–¥–≤–∞–∏–≤–∞—è –¥–æ—Ö–æ–¥."),
    ("ostrich",      80, "ü¶©", "–°—Ç—Ä–∞—É—Å",            "rare",    5_500,
        "–ë–µ–≥–∏ –±—ã—Å—Ç—Ä–µ–µ –≤—Å–µ—Ö, –∞ –µ–≥–æ –ø–µ—Ä—å—è –ø—Ä–æ–¥–∞—é—Ç—Å—è –∑–∞ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã–µ –∫–∞–º–Ω–∏."),
    ("emu",          80, "ü¶ô", "–≠–º—É",               "rare",    5_600,
        "–°–≤–æ–∏–º –∫—Ä–∏–∫–æ–º –≤—ã–∑—ã–≤–∞—é—Ç –¥—É—Ö–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞—Ä—è—Ç –º–æ–Ω–µ—Ç—ã."),
    ("rhinoceros",  120, "ü¶è", "–ù–æ—Å–æ—Ä–æ–≥",           "rare",   12_000,
        "–° —Ä–æ–≥–æ–º –∏–∑ —á–∏—Å—Ç–æ–≥–æ –æ–±—Å–∏–¥–∏–∞–Ω–∞, –∫–æ—Ç–æ—Ä—ã–π —Ü–µ–Ω–∏—Ç—Å—è –Ω–∞ –∞—É–∫—Ü–∏–æ–Ω–∞—Ö."),
    ("hippopotamus",120, "ü¶õ", "–ë–µ–≥–µ–º–æ—Ç",           "rare",   12_500,
        "–ü–æ–≥—Ä—É–∂—ë–Ω –≤ –±–æ–ª–æ—Ç–æ, –≥–¥–µ —Ä–∞—Å—Ç—É—Ç –∑–æ–ª–æ—Ç—ã–µ –∫—É–≤—à–∏–Ω–∫–∏."),
    ("giraffe",     115, "ü¶í", "–ñ–∏—Ä–∞—Ñ",             "rare",   11_800,
        "–í—ã—Å–æ–∫–∏–π, –∫–∞–∫ –≥–æ—Ä—ã, –µ–≥–æ –ø—è—Ç–Ω–∞ –∏–Ω–æ–≥–¥–∞ –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –∫—Ä–∏—Å—Ç–∞–ª–ª—ã."),
    ("zebra",        95, "ü¶ì", "–ó–µ–±—Ä–∞",             "rare",   10_200,
        "–ï—ë –ø–æ–ª–æ—Å—ã –º–æ–≥—É—Ç –æ—Ç—Ä–∞–∂–∞—Ç—å —Å–≤–µ—Ç –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–ª–ª—é–∑–∏—é –±–æ–≥–∞—Ç—Å—Ç–≤–∞."),
    ("bison",       105, "ü¶¨", "–ë–∏–∑–æ–Ω",             "rare",   11_000,
        "–°–∏–ª—å–Ω—ã–π, –∫–∞–∫ –±—É—Ä—è, –µ–≥–æ —Ä–æ–≥–∞ —Å–ø–æ—Å–æ–±–Ω—ã –æ—Ç—Ä–∞–∑–∏—Ç—å –ª—é–±–æ–π —É–¥–∞—Ä."),
    ("moose",       100, "ü¶å", "–õ–æ—Å—å",              "rare",   10_800,
        "–ì—Ä–æ–∑–Ω—ã–π, –Ω–æ –≤ –µ–≥–æ —Ä–æ–≥–∞—Ö —Ö—Ä–∞–Ω–∏—Ç—Å—è –¥—Ä–µ–≤–Ω—è—è –º–∞–≥–∏—è."),
    ("elk",          95, "ü¶å", "–í–µ–ø—Ä—å",             "rare",   10_500,
        "–°–≤–æ–∏–º —Ä—ë–≤–æ–º –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –¥–æ–∂–¥—å –º–æ–Ω–µ—Ç."),
    ("reindeer",    110, "ü¶å", "–°–µ–≤–µ—Ä–Ω—ã–π –æ–ª–µ–Ω—å",    "rare",   12_200,
        "–ò–º–µ–µ—Ç –∑–æ–ª–æ—Ç—ã–µ –∫–æ–ø—ã—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –æ—Å—Ç–∞–≤–ª—è—é—Ç –∑–æ–ª–æ—Ç–æ–π —Å–ª–µ–¥."),
    ("caribou",     110, "ü¶å", "–ö–∞—Ä–∏–±—É",            "rare",   12_300,
        "–ë–µ–∂–∏—Ç —Å–∫–≤–æ–∑—å –ª–µ—Å–∞, –æ—Å—Ç–∞–≤–ª—è—è –∑–æ–ª–æ—Ç–æ–π –º—É—Å–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–±–∏—Ä–∞—é—Ç –æ—Ö–æ—Ç–Ω–∏–∫–∏."),
    ("wild_boar",   120, "üêó", "–î–∏–∫–∏–π –∫–∞–±–∞–Ω",       "rare",   13_000,
        "–° –µ–≥–æ –∫–ª—ã–∫–∞–º–∏ –º–æ–∂–Ω–æ —Ä–∞—Å–∫–æ–ª–æ—Ç—å –ª—é–±—ã–µ —Å—É–Ω–¥—É–∫–∏."),
    # ------------------- EPIC -------------------
    ("dogs",        350, "üêï", "–°–æ–±–∞–∫–∏",            "epic",   30_000,
        "–í–µ—Ä–Ω—ã–µ –æ—Ö—Ä–∞–Ω–Ω–∏–∫–∏, –∏—Ö –ª–∞–π –æ—Ç–≥–æ–Ω—è–µ—Ç –≤–æ—Ä–æ–≤ –∏ –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –º–æ–Ω–µ—Ç—ã."),
    ("cats",        425, "üê±", "–ö–æ—à–∫–∏",             "epic",   35_000,
        "–¢–∞–π–Ω—ã–µ –æ—Ö–æ—Ç–Ω–∏–∫–∏, –∏—Ö –º—É—Ä–ª—ã–∫–∞–Ω—å–µ –ø–æ–≤—ã—à–∞–µ—Ç –¥–æ—Ö–æ–¥ —Ñ–µ—Ä–º—ã."),
    ("deer",        500, "ü¶å", "–û–ª–µ–Ω–∏",             "epic",   40_000,
        "–ò—Ö —Ä–æ–≥–∞ –º–æ–≥—É—Ç –±—ã—Ç—å –≤—ã–∫–æ–≤–∞–Ω—ã –≤ –∑–æ–ª–æ—Ç—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã."),
    ("foxes",       560, "ü¶ä", "–õ–∏—Å—ã",              "epic",   45_000,
        "–•–∏—Ç—Ä—ã–µ, –æ–Ω–∏ –ø—Ä—è—á—É—Ç –∑–æ–ª–æ—Ç—ã–µ –∫–ª–∞–¥—ã –≤ —Å–≤–æ–∏—Ö –Ω–æ—Ä–∞—Ö."),
    ("wolves",      630, "üê∫", "–í–æ–ª–∫–∏",             "epic",   50_000,
        "–°–≤–æ–∏–º –≤–æ–µ–º –ø—Ä–∏–≤–ª–µ–∫–∞—é—Ç –¥–∏–∫–∏—Ö –∑–≤–µ—Ä–µ–π, –ø–æ–≤—ã—à–∞—é—â–∏—Ö –¥–æ—Ö–æ–¥."),
    ("bears",       720, "üêª", "–ú–µ–¥–≤–µ–¥–∏",           "epic",   55_000,
        "–ú–æ–≥—É—Ç –¥–æ–±—ã–≤–∞—Ç—å –º—ë–¥, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–¥–∞—ë—Ç—Å—è –∑–∞ –æ–≥—Ä–æ–º–Ω—ã–µ —Å—É–º–º—ã."),
    ("boars",       685, "üêó", "–ö–∞–±–∞–Ω—ã",            "epic",   53_000,
        "–° –∏—Ö –∫–ª—ã–∫–∞–º–∏ –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å —Ä–µ–¥–∫–∏–µ —Å—É–Ω–¥—É–∫–∏."),
    ("raccoons",    450, "ü¶ù", "–ï–Ω–æ—Ç—ã",             "epic",   33_000,
        "–õ—é–±—è—Ç –≤–æ—Ä–æ–≤–∞—Ç—å –±–ª–µ—Å—Ç—è—â–∏–µ –≤–µ—â–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Ç–æ–º –ø—Ä–æ–¥–∞—é—Ç—Å—è."),
    ("badgers",     475, "ü¶°", "–ë–∞—Ä—Å—É–∫–∏",           "epic",   35_000,
        "–ö–æ–ø–∞—é—Ç –ø–æ–¥ –∑–µ–º–ª—ë–π, –Ω–∞—Ö–æ–¥—è –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã–µ –∫—Ä–∏—Å—Ç–∞–ª–ª—ã."),
    ("skunks",      400, "ü¶®", "–°–∫—É–Ω—Å—ã",            "epic",   30_000,
        "–ò—Ö –∑–∞–ø–∞—Ö –æ—Ç–ø—É–≥–∏–≤–∞–µ—Ç –≤–æ—Ä–æ–≤, –∞ –∞—Ä–æ–º–∞—Ç–Ω—ã–µ —à–∏—à–∫–∏ –ø—Ä–æ–¥–∞—é—Ç—Å—è –∑–∞ –º–æ–Ω–µ—Ç—ã."),
    ("lynx",        650, "üêà‚Äç‚¨õ", "–†—ã—Å—å",            "epic",   48_000,
        "–•–æ–ª–æ–¥–Ω—ã–π –≤–∑–≥–ª—è–¥ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –¥–æ–±—ã—á—É –≤ –∑–æ–ª–æ—Ç–æ."),
    ("bobcat",      620, "üêà‚Äç‚¨õ", "–ë–æ–±–µ—Ä‚Äë–∫–æ—Ç",        "epic",   47_000,
        "–°—Ç—Ä–æ–∏—Ç –ø–ª–æ—Ç–∏–Ω—ã –∏–∑ –∑–æ–ª–æ—Ç—ã—Ö –≤–µ—Ç–æ–∫."),
    ("jackal",      600, "üêï‚Äçü¶∫", "–®–∞–∫–∞–ª",           "epic",   45_500,
        "–°–∫–æ–ª—å–∑–∏—Ç –≤ –Ω–æ—á–∏, —Å–æ–±–∏—Ä–∞—è –º–æ–Ω–µ—Ç—ã —É —Å–ø—è—â–∏—Ö."),
    ("coyote",      590, "üêï‚Äçü¶∫", "–ö–æ–π–æ—Ç",            "epic",   44_000,
        "–ë—ã—Å—Ç—Ä—ã–π, –∫–∞–∫ –≤–µ—Ç–µ—Ä, –æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–æ–ª–æ—Ç–æ–π —Å–ª–µ–¥."),
    ("hyena",       720, "ü¶ä", "–ì–∏–µ–Ω–∞",             "epic",   49_000,
        "–°–º–µ—ë—Ç—Å—è, –∫–æ–≥–¥–∞ –º–æ–Ω–µ—Ç—ã –ø–∞–¥–∞—é—Ç –≤ –µ—ë –ª–∞–ø—ã."),
    ("wild_dog",    680, "üêï", "–î–∏–∫–∞—è —Å–æ–±–∞–∫–∞",      "epic",   42_000,
        "–ë—Ä–æ–¥–∏—Ç –ø–æ –ø—É—Å—Ç–æ—à–∞–º, —Å–æ–±–∏—Ä–∞—è —Ä–µ–¥–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã."),
    ("wild_cat",    730, "üêà", "–î–∏–∫–∞—è –∫–æ—à–∫–∞",       "epic",   46_000,
        "–ú—è–≥–∫–æ –º—É—Ä–ª—ã—á–µ—Ç, –ø—Ä–µ–≤—Ä–∞—â–∞—è —ç–Ω–µ—Ä–≥–∏—é –≤ –º–æ–Ω–µ—Ç—ã."),
    ("jackrabbit",  560, "üêá", "–ö—Ä–æ–ª–∏–∫‚Äë—Å–∫–∞–∫—É–Ω",     "epic",   38_000,
        "–°–∫–∞—á–µ—Ç —Ç–∞–∫ –±—ã—Å—Ç—Ä–æ, —á—Ç–æ –æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–æ–ª–æ—Ç–æ–π —Å–ª–µ–¥."),
    ("ermine",      610, "ü¶°", "–ì–æ—Ä–Ω–æ—Å—Ç–∞–π",         "epic",   40_000,
        "–°–≤–æ–µ–π —à—É–±–æ–π –º–æ–∂–µ—Ç –ø–æ–∫—Ä—ã—Ç—å —Ñ–µ—Ä–º—É –∑–æ–ª–æ—Ç–æ–π –ø—ã–ª—å—é."),
    ("marten",      590, "ü¶°", "–ö–æ—Å—É–ª—è",            "epic",   39_500,
        "–õ–æ–≤–∫–æ —Å–æ–±–∏—Ä–∞–µ—Ç –∑–æ–ª–æ—Ç—ã–µ –æ—Ä–µ—Ö–∏."),
    # ------------------- MYSTIC -------------------
    ("lions",      2000, "ü¶Å", "–õ—å–≤—ã",              "mystic", 150_000,
        "–ö–æ—Ä–æ–ª–∏ —Å–∞–≤–∞–Ω–Ω, –∏—Ö —Ä—ã—á–∞–Ω–∏–µ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –∑–µ–º–ª—é –≤ –∑–æ–ª–æ—Ç–æ."),
    ("tigers",     2300, "üêØ", "–¢–∏–≥—Ä—ã",             "mystic", 170_000,
        "–°–∫—Ä—ã—Ç–Ω—ã–µ –æ—Ö–æ—Ç–Ω–∏–∫–∏, –∏—Ö –ø–æ–ª–æ—Å—ã —Å–∏—è—é—Ç –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã–º–∏ –∫–∞–º–Ω—è–º–∏."),
    ("pandas",     2600, "üêº", "–ü–∞–Ω–¥—ã",             "mystic", 190_000,
        "–ú–µ–¥–∏—Ç–∏—Ä—É—é—Ç –≤ –±–∞–º–±—É–∫–æ–≤—ã—Ö —Ä–æ—â–∞—Ö, –≥–¥–µ —Ä–∞—Å—Ç—É—Ç –∑–æ–ª–æ—Ç—ã–µ –ª–∏—Å—Ç–æ—á–∫–∏."),
    ("leopards",   2400, "ü¶ö", "–ì–µ–ø–∞—Ä–¥—ã",           "mystic", 165_000,
        "–ë—ã—Å—Ç—ã, –∫–∞–∫ –º–æ–ª–Ω–∏—è, –∏—Ö –ø—è—Ç–Ω–∞ –º–æ–≥—É—Ç –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å—Å—è –≤ –∫—Ä–∏—Å—Ç–∞–ª–ª—ã."),
    ("jaguars",    2600, "üêÜ", "–Ø–≥—É–∞—Ä—ã",            "mystic", 175_000,
        "–°–∫–≤–æ–∑—å –Ω–æ—á–Ω—É—é —Ç—å–º—É –æ–Ω–∏ –≤–∏–¥—è—Ç –∑–æ–ª–æ—Ç—ã–µ —Å–æ–∫—Ä–æ–≤–∏—â–∞."),
    ("cheetahs",   2500, "üêÜ", "–ì–µ–ø–∞—Ä–¥—ã‚Äë–±—ã—Å—Ç—Ä—ã–µ",   "mystic", 160_000,
        "–°–∞–º—ã–µ –±—ã—Å—Ç—Ä—ã–µ, –∏—Ö —Å–ª–µ–¥—ã –æ—Å—Ç–∞–≤–ª—è—é—Ç –∑–æ–ª–æ—Ç–æ–π –ø—ã–ª—å."),
    ("koalas",     2200, "üê®", "–ö–æ–∞–ª—ã",             "mystic", 145_000,
        "–ü–∏—Ç–∞—é—Ç—Å—è –º–∞–≥–∏—á–µ—Å–∫–∏–º —ç–≤–∫–∞–ª–∏–ø—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –º–æ–Ω–µ—Ç—ã."),
    ("kangaroos",  2400, "ü¶ò", "–ö–µ–Ω–≥—É—Ä—É",           "mystic", 155_000,
        "–ü—Ä—ã–≥–∞—é—Ç —Å–∫–≤–æ–∑—å –æ–±–ª–∞–∫–∞, —Å–æ–±–∏—Ä–∞—è –∑–æ–ª–æ—Ç—ã–µ –∑–≤—ë–∑–¥—ã."),
    ("platypus",   2300, "ü¶Ü", "–£—Ç–∫–æ–Ω–æ—Å",           "mystic", 150_000,
        "–°–≤–æ–∏–º–∏ —Å—Ç—Ä–∞–Ω–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç —Ä–µ–¥–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã."),
    ("eagles",     2500, "ü¶Ö", "–û—Ä–ª—ã",              "mystic", 152_000,
        "–í–∑–º—ã–≤–∞—é—Ç –≤ –Ω–µ–±–æ, –≥–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –∑–æ–ª–æ—Ç—ã–µ –æ–±–ª–∞–∫–∞."),
    ("hawks",      2400, "ü¶Ö", "–Ø—Å—Ç—Ä–µ–±—ã",           "mystic", 148_000,
        "–õ–µ—Ç—è—Ç –≤—ã—Å–æ–∫–æ, –∏—Ö –∫—Ä–∏–∫–∏ –≤—ã–∑—ã–≤–∞—é—Ç –ø–∞–¥–µ–Ω–∏–µ –º–æ–Ω–µ—Ç —Å –Ω–µ–±–µ—Å."),
    ("owls",       2300, "ü¶â", "–°–æ–≤—ã",              "mystic", 140_000,
        "–ù–æ—á–Ω—ã–µ —Å—Ç—Ä–∞–∂–∏, –∏—Ö –∫—Ä–∏–∫–∏ –ø—Ä–∏–Ω–æ—Å—è—Ç –∑–æ–ª–æ—Ç–æ–π —Å–≤–µ—Ç."),
    ("falcons",    2500, "ü¶Ö", "–°–æ–∫–æ–ª—ã",            "mystic", 152_500,
        "–°–∫–æ—Ä–æ—Å—Ç—å –∏ —Ç–æ—á–Ω–æ—Å—Ç—å ‚Äì –∏—Ö –ø–µ—Ä—å—è –ø–æ–∫—Ä—ã—Ç—ã –∑–æ–ª–æ—Ç–æ–º."),
    ("griffin",    3800, "ü¶Ö", "–ì—Ä–∏—Ñ–æ–Ω",            "mystic", 300_000,
        "–ü–æ–ª—É–∫—Ä—ã–ª—ã–π –ª–µ–≤, –æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–∫—Ä–æ–≤–∏—â–∞, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∏—Ç —Å —Ö–æ–∑—è–∏–Ω–æ–º."),
    ("phoenix",    4200, "ü¶ú", "–§–µ–Ω–∏–∫—Å",            "mystic", 350_000,
        "–í–æ—Å—Å—Ç–∞—ë—Ç –∏–∑ –ø–µ–ø–ª–∞, –∫–∞–∂–¥–æ–µ –≤–æ–∑—Ä–æ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏–Ω–æ—Å–∏—Ç –æ–≥—Ä–æ–º–Ω—ã–π –¥–æ—Ö–æ–¥."),
    ("unicorn",    3900, "ü¶Ñ", "–ï–¥–∏–Ω–æ—Ä–æ–≥",          "mystic", 330_000,
        "–õ–µ–≥–µ–Ω–¥–∞, —á–µ–π —Ä–æ–≥ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –≤—Å—ë –≤ –∑–æ–ª–æ—Ç–æ."),
    ("pegasus",    3800, "ü¶Ñ","–ü–µ–≥–∞—Å",             "mystic", 320_000,
        "–ö—Ä—ã–ª–∞—Ç—ã–π –∫–æ–Ω—å, –µ–≥–æ –ø–æ–ª—ë—Ç —É—Å–∫–æ—Ä—è–µ—Ç —Ä–æ—Å—Ç —Ñ–µ—Ä–º—ã."),
    ("kraken",     4300, "üêô","–ö—Ä–∞–∫–µ–Ω",            "mystic", 400_000,
        "–¢–∏—Ç–∞–Ω –º–æ—Ä–µ–π, –µ–≥–æ —â—É–ø–∞–ª—å—Ü–∞ —Å–æ–±–∏—Ä–∞—é—Ç —Ä–µ–¥–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã."),
    ("yeti",       4100, "‚ùÑÔ∏è","–ô–µ—Ç–∏",              "mystic", 380_000,
        "–°–∫–æ–ª—å–∑–∏—Ç –ø–æ —Å–Ω–µ–≥—É, –æ—Å—Ç–∞–≤–ª—è—è –∑–æ–ª–æ—Ç–æ–π —Å–ª–µ–¥."),
    ("sasquatch",  4000, "üë£","–°–∞—Å–∫–≤–æ—á",           "mystic", 375_000,
        "–¢–∞–π–Ω—ã–π –≥–∏–≥–∞–Ω—Ç, —á—å–∏ —à–∞–≥–∏ –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –º–æ–Ω–µ—Ç—ã."),
    # ------------------- SECRET -------------------
    ("dragons",     8000, "üêâ", "–î—Ä–∞–∫–æ–Ω—ã",          "secret", 1_500_000,
        "–û–≥–Ω–µ–Ω–Ω—ã–µ –º–æ–Ω—Å—Ç—Ä—ã, –∏—Ö —á–µ—à—É—è ‚Äì —á–∏—Å—Ç–æ–µ –∑–æ–ª–æ—Ç–æ."),
    ("hydras",      8500, "üêâ", "–ì–∏–¥—Ä—ã",            "secret", 1_700_000,
        "–ú–Ω–æ–≥–æ–≥–æ–ª–æ–≤—ã–µ —á—É–¥–æ–≤–∏—â–∞, –∫–∞–∂–¥—É—é –≥–æ–ª–æ–≤—É –º–æ–∂–Ω–æ –ø—Ä–æ–¥–∞—Ç—å –∑–∞ –∫—É—á—É –º–æ–Ω–µ—Ç."),
    ("leviathans",  9000, "üêã", "–õ–µ–≤–∏–∞—Ñ–∞–Ω—ã",        "secret", 1_900_000,
        "–ì–∏–≥–∞–Ω—Ç—ã –æ–∫–µ–∞–Ω–∞, –∏—Ö —à–∫—É—Ä—ã —Ü–µ–Ω—è—Ç—Å—è –Ω–∞ –∞—É–∫—Ü–∏–æ–Ω–∞—Ö."),
    ("golems",      9500, "üóø", "–ì–æ–ª–µ–º—ã",           "secret", 2_100_000,
        "–ò–∑ –∫–∞–º–Ω—è –∫ –∑–æ–ª–æ—Ç—É ‚Äì –∏—Ö —Å–µ—Ä–¥—Ü–∞ –ø–æ–ª–Ω—ã —Ü–µ–Ω–Ω—ã—Ö –∫–∞–º–Ω–µ–π."),
    ("djinn",      10000, "üßû‚Äç‚ôÇÔ∏è", "–î–∂–∏–Ω–Ω",          "secret", 2_300_000,
        "–í—ã–ø–æ–ª–Ω—è—é—Ç –∂–µ–ª–∞–Ω–∏—è, –Ω–æ —Ç–æ–ª—å–∫–æ –∑–∞ –º–æ–Ω–µ—Ç—ã."),
    ("basilisks",  10500, "üêç", "–ë–∞–∑–∏–ª–∏—Å–∫–∏",        "secret", 2_500_000,
        "–°–º–æ—Ç—Ä—è—Ç –≤ –≤–∞—Å ‚Äì –∏ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –±–æ–≥–∞—Ç—Å—Ç–≤–æ."),
    ("chimeras",   11000, "üê≤", "–•–∏–º–µ—Ä—ã",           "secret", 2_700_000,
        "–°–æ—á–µ—Ç–∞–Ω–∏–µ —Å–∏–ª, –∏—Ö —á–∞—Å—Ç–∏ –º–æ–∂–Ω–æ –ø—Ä–æ–¥–∞—Ç—å –ø–æ —Ä–∞–∑–Ω—ã–º —Ü–µ–Ω–∞–º."),
    ("sirens",     11500, "üßú‚Äç‚ôÄÔ∏è", "–°–∏—Ä–µ–Ω—ã",        "secret", 2_900_000,
        "–ü–æ—é—Ç –ø–µ—Å–Ω–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Å—Ç–∞–≤–ª—è—é—Ç –º–æ–Ω–µ—Ç—ã –ø–∞–¥–∞—Ç—å —Å –Ω–µ–±–µ—Å."),
    ("wraiths",    12000, "üëª", "–ü—Ä–∏–∑—Ä–∞–∫–∏",         "secret", 3_100_000,
        "–ë—Ä–æ–¥—è—Ç –º–µ–∂–¥—É –º–∏—Ä–∞–º–∏, –æ—Å—Ç–∞–≤–ª—è—è –∑–æ–ª–æ—Ç–æ–π —Ç—É–º–∞–Ω."),
    ("specters",   12500, "üëª", "–°–ø–µ–∫—Ç—Ä—ã",          "secret", 3_300_000,
        "–°–≤–µ—Ç—è—Ç—Å—è –≤ —Ç–µ–º–Ω–æ—Ç–µ, –∏—Ö —Å–≤–µ—Ç ‚Äì —á–∏—Å—Ç–æ–µ –∑–æ–ª–æ—Ç–æ."),
    ("liches",     13000, "‚ò†Ô∏è", "–õ–∏—á–∏",             "secret", 3_500_000,
        "–ë–µ—Å—Å–º–µ—Ä—Ç–Ω—ã–µ –º–∞–≥–∏, –∏—Ö –∫–Ω–∏–≥–∏ –ø–æ–ª–Ω—ã —Ü–µ–Ω–Ω—ã—Ö –∑–Ω–∞–Ω–∏–π."),
    ("archangels", 13500, "üòá", "–ê—Ä—Ö–∞–Ω–≥–µ–ª—ã",        "secret", 3_700_000,
        "–ù–µ–±–µ—Å–Ω—ã–µ –≤–æ–∏–Ω—ã, –∏—Ö –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏—è –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –º–æ–Ω–µ—Ç—ã."),
    ("demon_lords",14000,"üòà", "–í–ª–∞–¥—ã–∫–∏ –¥–µ–º–æ–Ω–æ–≤",  "secret", 3_900_000,
        "–¢—ë–º–Ω—ã–µ –ø—Ä–∞–≤–∏—Ç–µ–ª–∏, –∏—Ö –∫–ª—è—Ç–≤—ã —Å—Ç–æ—è—Ç –æ–≥—Ä–æ–º–Ω—ã—Ö —Å—É–º–º."),
    ("celestials", 14500,"üåü","–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ",     "secret", 4_100_000,
        "–°–≤–µ—Ç—è—â–∏–µ—Å—è —Å—É—â–µ—Å—Ç–≤–∞, –∏—Ö —Å–≤–µ—Ç –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –∑–æ–ª–æ—Ç–æ."),
    ("voidbeasts", 15000,"üåÄ","–°—É—â–µ—Å—Ç–≤–∞ –ü—É—Å—Ç–æ—Ç—ã", "secret", 4_300_000,
        "–ò–∑ –±–µ–∑–¥–Ω—ã –ø—Ä–∏–Ω–æ—Å—è—Ç —Ä–µ–¥–∫–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã."),
    ("timekeepers",15500,"‚è≥","–•—Ä–∞–Ω–∏—Ç–µ–ª–∏ –í—Ä–µ–º–µ–Ω–∏","secret", 4_500_000,
        "–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç –≤—Ä–µ–º—è, —É—Å–∫–æ—Ä—è—è —Ä–æ—Å—Ç –¥–æ—Ö–æ–¥–∞."),
    ("shadow_dragons",16000,"üêâ","–¢–µ–Ω–µ–≤—ã–µ –¥—Ä–∞–∫–æ–Ω—ã","secret", 4_700_000,
        "–°–∫—Ä—ã—Ç—ã –≤ —Ç–µ–Ω—è—Ö, –∏—Ö –∫–ª—ã–∫–∏ –ø—Ä–æ–¥–∞—é—Ç—Å—è –∑–∞ –±–∞—Å–Ω–æ—Å–ª–æ–≤–Ω—ã–µ —Å—É–º–º—ã."),
    ("star_beasts",16500,"üå†","–ó–≤—ë–∑–¥–Ω—ã–µ –∑–≤–µ—Ä–∏","secret", 4_900_000,
        "–°–æ–±–∏—Ä–∞—é—Ç —Å–≤–µ—Ç –∑–≤—ë–∑–¥, –ø—Ä–µ–≤—Ä–∞—â–∞—è –µ–≥–æ –≤ –º–æ–Ω–µ—Ç—ã."),
    ("galactic_whales",17000,"üêã","–ì–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∫–∏—Ç—ã","secret", 5_100_000,
        "–ü–ª—ã–≤—É—Ç –ø–æ –∫–æ—Å–º–æ—Å—É, –∏—Ö –ø–µ—Å–Ω–∏ –ø—Ä–∏–Ω–æ—Å—è—Ç –±–æ–≥–∞—Ç—Å—Ç–≤–æ."),
    ("secret_spider",18500,"üï∑Ô∏è","–ü–∞—É–∫‚Äë—Å–µ–∫—Ä–µ—Ç","secret", 5_300_000,
        "–¢–∫–∞–Ω—å –ø–∞—É–∫–∞ —Å–ø–æ—Å–æ–±–Ω–∞ –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å –ª—é–±–æ–π –ø—Ä–µ–¥–º–µ—Ç –≤ –∑–æ–ª–æ—Ç–æ."),
    # ------------------- ULTRA‚ÄëLEGENDARY (10 –±–∞–∑–æ–≤—ã—Ö) -------------------
    ("cosmic_behemoth",   80000, "ü™ê", "–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –ë–µ–≥–µ–º–æ—Ç",    "ultra", 10_000_000,
        "–ì–∏–≥–∞–Ω—Ç –∏–∑ –∫–æ—Å–º–æ—Å–∞, –µ–≥–æ –¥—ã—Ö–∞–Ω–∏–µ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –≤—Å—ë –≤ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã–µ –∫–∞–º–Ω–∏."),
    ("eternal_phoenix",   90000, "ü¶ú", "–í–µ—á–Ω—ã–π –§–µ–Ω–∏–∫—Å",         "ultra", 12_000_000,
        "–í–æ—Å—Å—Ç–∞—ë—Ç –∏–∑ –ø–µ–ø–ª–∞, –∫–∞–∂–¥–æ–µ –≤–æ–∑—Ä–æ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏–Ω–æ—Å–∏—Ç –æ–≥—Ä–æ–º–Ω—ã–π –¥–æ—Ö–æ–¥."),
    ("infinite_dragon",  100000, "üêâ", "–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –î—Ä–∞–∫–æ–Ω",    "ultra", 14_000_000,
        "–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π, –µ–≥–æ —á–µ—à—É—è —Å—Ç–æ–∏—Ç —Ü–µ–ª–æ–µ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ."),
    ("mythic_leviathan",110000,"üêã","–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π –õ–µ–≤–∏–∞—Ñ–∞–Ω","ultra", 16_000_000,
        "–õ–µ–≥–µ–Ω–¥–∞ –æ–∫–µ–∞–Ω–æ–≤, –∫–∞–∂–¥—ã–π –µ–≥–æ –≤–∑–¥–æ—Ö ‚Äì –∑–æ–ª–æ—Ç–æ–π –¥–æ–∂–¥—å."),
    ("celestial_golem",  120000,"üóø","–ù–µ–±–µ—Å–Ω—ã–π –ì–æ–ª–µ–º",         "ultra", 18_000_000,
        "–°–æ–∑–¥–∞–Ω –∏–∑ –∑–≤—ë–∑–¥–Ω–æ–≥–æ –∫–∞–º–Ω—è, –µ–≥–æ —Å–µ—Ä–¥—Ü–µ ‚Äì –∑–æ–ª–æ—Ç–æ–π –∫—Ä–∏—Å—Ç–∞–ª–ª."),
    ("void_kraken",       130000,"üêô","–ö—Ä–∞–∫–µ–Ω –ü—É—Å—Ç–æ—Ç—ã",        "ultra", 20_000_000,
        "–õ–æ–≤–∏—Ç –¥—É—à–∏ –≤ –ø—É—Å—Ç–æ—Ç–µ, –ø—Ä–µ–≤—Ä–∞—â–∞—è –∏—Ö –≤ –º–æ–Ω–µ—Ç—ã."),
    ("time_wraith",       140000,"üëª","–ü—Ä–∏–∑—Ä–∞–∫ –í—Ä–µ–º–µ–Ω–∏",       "ultra", 22_000_000,
        "–ó–∞–º–æ—Ä–∞–∂–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è, —É—Å–∫–æ—Ä—è—è —Ä–æ—Å—Ç –¥–æ—Ö–æ–¥–∞ –≤ —Ä–∞–∑—ã."),
    ("stellar_unicorn",   150000,"ü¶Ñ","–ó–≤—ë–∑–¥–Ω—ã–π –ï–¥–∏–Ω–æ—Ä–æ–≥",     "ultra", 24_000_000,
        "–õ–µ–≥–µ–Ω–¥–∞, —á–µ–π —Ä–æ–≥ —Å–≤–µ—Ç–∏—Ç, –ø—Ä–µ–≤—Ä–∞—â–∞—è –≤—Å—ë –≤ –∑–æ–ª–æ—Ç–æ."),
    ("dimensional_titan", 160000,"üß±","–ò–∑–º–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –¢–∏—Ç–∞–Ω",   "ultra", 26_000_000,
        "–†–∞–∑—Ä—É—à–∞–µ—Ç –∏–∑–º–µ—Ä–µ–Ω–∏—è, –æ—Å—Ç–∞–≤–ª—è—è –ø–æ—Å–ª–µ —Å–µ–±—è –∑–æ–ª–æ—Ç–æ–π —Å–ª–æ–π."),
    ("ultimate_spider",   170000,"üï∑Ô∏è","–£–ª—å—Ç–∏–º–∞—Ç–∏–≤–Ω—ã–π –ü–∞—É–∫",    "ultra", 28_000_000,
        "–¢–∫–∞–Ω—å –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –ª—é–±–æ–π –ø—Ä–µ–¥–º–µ—Ç –≤ –∑–æ–ª–æ—Ç–æ."),
    # ------------------- 40 –æ—Å—Ç–∞–ª—å–Ω—ã—Ö ULTRA‚ÄëLEGENDARY -------------------
    ("galactic_dragon",      180000, "üêâ", "–ì–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –î—Ä–∞–∫–æ–Ω",      "ultra", 30_000_000,
        "–°–∫–≤–æ–∑—å –∑–≤—ë–∑–¥–Ω—ã–µ –ø–æ–ª—è –µ–≥–æ –ø–ª–∞–º—è –∫—Ä–∏—Å—Ç–∞–ª–∏–∑—É–µ—Ç—Å—è –≤ —á–∏—Å—Ç—ã–π –∑–æ–ª–æ—Ç–æ–Ω–æ—Å–Ω—ã–π –∫—Ä–∏—Å—Ç–∞–ª–ª."),
    ("stellar_phoenix",      190000, "ü¶ú", "–ó–≤—ë–∑–¥–Ω—ã–π –§–µ–Ω–∏–∫—Å",          "ultra", 32_000_000,
        "–í–æ—Å—Å—Ç–∞—ë—Ç –∏–∑ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ –ø–µ–ø–ª–∞, –∫–∞–∂–¥—ã–π –ø–æ–ª—ë—Ç ‚Äì –º–∏–ª–ª–∏–∞—Ä–¥—ã –º–æ–Ω–µ—Ç."),
    ("quantum_unicorn",      200000, "ü¶Ñ", "–ö–≤–∞–Ω—Ç–æ–≤—ã–π –ï–¥–∏–Ω–æ—Ä–æ–≥",        "ultra", 34_000_000,
        "–†–∞–∑—Ä—É—à–∞–µ—Ç –∑–∞–∫–æ–Ω—ã —Ñ–∏–∑–∏–∫–∏: –∫–∞–∂–¥—ã–π —à–∞–≥ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∑–æ–ª–æ—Ç–æ–π –ø–æ—Ç–æ–∫."),
    ("void_wyrm",            210000, "üêâ", "–í–æ–π–¥ –í–∏—Ä–º",                "ultra", 36_000_000,
        "–û–±–∏—Ç–∞–µ—Ç –≤ –ø—É—Å—Ç–æ—Ç–µ, –ø–æ–≥–ª–æ—â–∞–µ—Ç –≤—Å—ë, –æ—Å—Ç–∞–≤–ª—è—è –ª–∏—à—å –∑–æ–ª–æ—Ç–æ."),
    ("alpha_leviathan",      220000, "üêã", "–ê–ª—å—Ñ–∞ –õ–µ–≤–∏–∞—Ñ–∞–Ω",           "ultra", 38_000_000,
        "–í–ª–∞–¥—ã–∫–∞ –º–æ—Ä–µ–π, –∫–∞–∂–¥–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤–æ–¥—ã –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –º–æ–Ω–µ—Ç—ã."),
    ("beta_golem",            230000, "üóø", "–ë–µ—Ç–∞ –ì–æ–ª–µ–º",               "ultra", 40_000_000,
        "–ò–∑ –∫–∞–º–Ω—è –∫ –∑–æ–ª–æ—Ç—É ‚Äì –∏—Ö —Å–µ—Ä–¥—Ü–∞ –ø–æ–ª–Ω—ã —Ü–µ–Ω–Ω—ã—Ö –∫–∞–º–Ω–µ–π."),
    ("sigma_kraken",          240000, "üêô", "–°–∏–≥–º–∞ –ö—Ä–∞–∫–µ–Ω",             "ultra", 42_000_000,
        "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ –≤ 10 —Ä–∞–∑, –∫–æ–≥–¥–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω."),
    ("omega_spider",          250000, "üï∑Ô∏è","–û–º–µ–≥–∞ –ü–∞—É–∫",                "ultra", 44_000_000,
        "–°–µ—Ç—å –µ–≥–æ –ø–∞—É—Ç–∏–Ω—ã –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤–µ—Å—å –º–∏—Ä, –ø—Ä–µ–≤—Ä–∞—â–∞—è –≤—Å—ë –≤ –∑–æ–ª–æ—Ç–æ."),
    ("nebula_titan",          260000, "üß±","–¢–∏—Ç–∞–Ω –¢—É–º–∞–Ω–Ω–æ—Å—Ç–∏",          "ultra", 46_000_000,
        "–°–æ–∫—Ä—É—à–∞–µ—Ç –≥–∞–ª–∞–∫—Ç–∏–∫–∏, –æ—Å—Ç–∞–≤–ª—è—è –ø–æ—Å–ª–µ —Å–µ–±—è –∑–æ–ª–æ—Ç–æ–π —Å–ª–µ–¥."),
    ("chrono_phoenix",        270000, "ü¶ú","–•—Ä–æ–Ω–æ –§–µ–Ω–∏–∫—Å",             "ultra", 48_000_000,
        "–ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è, –∫–∞–∂–¥—ã–π –≤–∑–ª—ë—Ç —É–¥–≤–∞–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥."),
    ("aurora_dragon",         280000, "üêâ","–ê–≤—Ä–æ—Ä–∞ –î—Ä–∞–∫–æ–Ω",            "ultra", 50_000_000,
        "–°–≤–µ—Ç–∏—Ç—Å—è –ø–æ–ª—è—Ä–Ω—ã–º —Å–∏—è–Ω–∏–µ–º, –∫–∞–∂–¥–æ–µ –¥—ã—Ö–∞–Ω–∏–µ ‚Äì –∑–æ–ª–æ—Ç–æ–π –¥–æ–∂–¥—å."),
    ("radiant_unicorn",       290000, "ü¶Ñ","–°–∏—è—é—â–∏–π –ï–¥–∏–Ω–æ—Ä–æ–≥",         "ultra", 52_000_000,
        "–°–≤–µ—Ç –µ–≥–æ —Ä–æ–≥–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –ª—é–±–æ–π –º–∞—Ç–µ—Ä–∏–∞–ª –≤ –∑–æ–ª–æ—Ç–æ."),
    ("celestial_spider",      300000, "üï∑Ô∏è","–ù–µ–±–µ—Å–Ω—ã–π –ü–∞—É–∫",            "ultra", 54_000_000,
        "–¢–∫–∞–Ω—å –∏–∑ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ —Å–≤–µ—Ç–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –≤—Å—ë –≤ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã–µ –∫–∞–º–Ω–∏."),
    ("hyper_leviathan",       310000, "üêã","–ì–∏–ø–µ—Ä‚Äë–õ–µ–≤–∏–∞—Ñ–∞–Ω",           "ultra", 56_000_000,
        "–ì–∏–ø–µ—Ä‚Äë–º–∞—Å—à—Ç–∞–±–Ω—ã–π, –∫–∞–∂–¥–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–æ—Ç–Ω–∏ —Ç—ã—Å—è—á –º–æ–Ω–µ—Ç."),
    ("quantum_golem",         320000, "üóø","–ö–≤–∞–Ω—Ç–æ–≤—ã–π –ì–æ–ª–µ–º",          "ultra", 58_000_000,
        "–°–æ–±—Ä–∞–Ω –∏–∑ –∫–≤–∞–Ω—Ç–æ–≤—ã—Ö —á–∞—Å—Ç–∏—Ü, –∏–∑–ª—É—á–∞–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –¥–æ—Ö–æ–¥."),
    ("void_phoenix",          330000, "ü¶ú","–í–æ–π–¥ –§–µ–Ω–∏–∫—Å",              "ultra", 60_000_000,
        "–í–æ—Å–∫—Ä–µ—à–∞–µ—Ç—Å—è –∏–∑ –ø—É—Å—Ç–æ—Ç—ã, –∫–∞–∂–¥–æ–µ –≤–æ–∑—Ä–æ–∂–¥–µ–Ω–∏–µ ‚Äì –º–∏–ª–ª–∏–∞—Ä–¥—ã –º–æ–Ω–µ—Ç."),
    ("stellar_spider",        340000, "üï∑Ô∏è","–ó–≤—ë–∑–¥–Ω—ã–π –ü–∞—É–∫",            "ultra", 62_000_000,
        "–ü–ª–µ—Ç—ë—Ç –ø–∞—É—Ç–∏–Ω—É –∏–∑ –∑–≤—ë–∑–¥–Ω–æ–≥–æ —Å–≤–µ—Ç–∞, –ø—Ä–µ–≤—Ä–∞—â–∞—è –≤—Å—ë –≤ –∑–æ–ª–æ—Ç–æ."),
    ("cosmic_unicorn",        350000, "ü¶Ñ","–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –ï–¥–∏–Ω–æ—Ä–æ–≥",     "ultra", 64_000_000,
        "–†–æ–≥ –∏–∑ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ –∏–∑–ª—É—á–µ–Ω–∏—è –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –≤—Å—ë –≤ –º–æ–Ω–µ—Ç—ã."),
    ("chrono_dragon",         360000, "üêâ","–•—Ä–æ–Ω–æ –î—Ä–∞–∫–æ–Ω",             "ultra", 66_000_000,
        "–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –≤—Ä–µ–º—è, –∫–∞–∂–¥—ã–π —É–¥–∞—Ä —É–¥–≤–∞–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥."),
    ("aurora_phoenix",        370000, "ü¶ú","–ê–≤—Ä–æ—Ä–∞ –§–µ–Ω–∏–∫—Å",            "ultra", 68_000_000,
        "–í–æ–∑—Ä–æ–∂–¥–∞–µ—Ç—Å—è –≤ —Å–∏—è–Ω–∏–∏ –ø–æ–ª—è—Ä–Ω—ã—Ö —Å–∏—è–Ω–∏–π, –¥–∞—Ä—è –∑–æ–ª–æ—Ç–æ–π –¥–æ–∂–¥—å."),
    ("radiant_spider",        380000, "üï∑Ô∏è","–°–∏—è—é—â–∏–π –ü–∞—É–∫",             "ultra", 70_000_000,
        "–¢–∫–∞–Ω—å –∏–∑ —á–∏—Å—Ç–æ–≥–æ —Å–≤–µ—Ç–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –ª—é–±—ã–µ —Ä–µ—Å—É—Ä—Å—ã –≤ –∑–æ–ª–æ—Ç–æ."),
    ("nebula_unicorn",        390000, "ü¶Ñ","–¢—É–º–∞–Ω–Ω—ã–π –ï–¥–∏–Ω–æ—Ä–æ–≥",        "ultra", 72_000_000,
        "–°–æ–∑–¥–∞—ë—Ç –∑–æ–ª–æ—Ç–æ–π –≤–∏—Ö—Ä—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º —à–∞–≥–µ."),
    ("hyper_dragon",          400000, "üêâ","–ì–∏–ø–µ—Ä –î—Ä–∞–∫–æ–Ω",             "ultra", 74_000_000,
        "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ –≤ 100 —Ä–∞–∑ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –ø–æ–±–µ–¥—ã."),
    ("alpha_phoenix",         410000, "ü¶ú","–ê–ª—å—Ñ–∞ –§–µ–Ω–∏–∫—Å",             "ultra", 76_000_000,
        "–ü–µ—Ä–≤–∞—è –ø—Ç–∏—Ü–∞ –≤–æ–∑—Ä–æ–∂–¥–µ–Ω–∏—è, –µ—ë –∫—Ä–∏–∫ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –≤—Å—ë –≤ –º–æ–Ω–µ—Ç—ã."),
    ("beta_spider",           420000, "üï∑Ô∏è","–ë–µ—Ç–∞ –ü–∞—É–∫",                "ultra", 78_000_000,
        "–°–µ—Ç—å –∏–∑ —á–µ—Ä–Ω—ã—Ö –Ω–∏—Ç–µ–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ–≥—Ä–æ–º–Ω—ã–π –¥–æ—Ö–æ–¥."),
    ("sigma_unicorn",         430000, "ü¶Ñ","–°–∏–≥–º–∞ –ï–¥–∏–Ω–æ—Ä–æ–≥",           "ultra", 80_000_000,
        "–ú–æ—â–Ω—ã–π —Ä–æ–≥, –≥–µ–Ω–µ—Ä–∏—Ä—É—é—â–∏–π –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –º–æ–Ω–µ—Ç—ã."),
    ("omega_dragon",          440000, "üêâ","–û–º–µ–≥–∞ –î—Ä–∞–∫–æ–Ω",             "ultra", 82_000_000,
        "–ü–æ—Å–ª–µ–¥–Ω–∏–π –¥—Ä–∞–∫–æ–Ω, –∫–∞–∂–¥–æ–µ –¥—ã—Ö–∞–Ω–∏–µ ‚Äì –∑–æ–ª–æ—Ç–æ–π —à—Ç–æ—Ä–º."),
    ("chrono_spider",         450000, "üï∑Ô∏è","–•—Ä–æ–Ω–æ –ü–∞—É–∫",               "ultra", 84_000_000,
        "–¢–∫–∞–Ω—å –∏–∑ –≤—Ä–µ–º–µ–Ω–∏, —É—Å–∫–æ—Ä—è—é—â–∞—è –¥–æ—Ö–æ–¥ –≤ —Ä–∞–∑—ã."),
    ("aurora_unicorn",        460000, "ü¶Ñ","–ê–≤—Ä–æ—Ä–∞ –ï–¥–∏–Ω–æ—Ä–æ–≥",          "ultra", 86_000_000,
        "–°–≤–µ—Ç—è—â–∏–π—Å—è —Ä–æ–≥ —Å–æ–∑–¥–∞—ë—Ç –∑–æ–ª–æ—Ç–æ–π –¥–æ–∂–¥—å."),
    ("radiant_dragon",        470000, "üêâ","–°–∏—è—é—â–∏–π –î—Ä–∞–∫–æ–Ω",           "ultra", 88_000_000,
        "–ö–∞–∂–¥–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ ‚Äì –ø–æ—Ç–æ–∫ –∑–æ–ª–æ—Ç–æ–π —ç–Ω–µ—Ä–≥–∏–∏."),
    ("nebula_spider",         480000, "üï∑Ô∏è","–¢—É–º–∞–Ω–Ω—ã–π –ü–∞—É–∫",            "ultra", 90_000_000,
        "–¢–∫–∞–Ω—å –∏–∑ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ —Ç—É–º–∞–Ω–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –≤—Å—ë –≤ –º–æ–Ω–µ—Ç—ã."),
    ("hyper_unicorn",         490000, "ü¶Ñ","–ì–∏–ø–µ—Ä –ï–¥–∏–Ω–æ—Ä–æ–≥",           "ultra", 92_000_000,
        "–≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç –¥–æ—Ö–æ–¥–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —à–∞–≥–µ."),
    ("alpha_dragon",          500000, "üêâ","–ê–ª—å—Ñ–∞ –î—Ä–∞–∫–æ–Ω",             "ultra", 94_000_000,
        "–°–∞–º—ã–π –ø–µ—Ä–≤—ã–π –¥—Ä–∞–∫–æ–Ω ‚Äì –∫–∞–∂–¥—ã–π —É—Ä–æ–Ω —É–¥–≤–∞–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥."),
    ("beta_phoenix",          510000, "ü¶ú","–ë–µ—Ç–∞ –§–µ–Ω–∏–∫—Å",              "ultra", 96_000_000,
        "–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏–∑ –∑–≤—ë–∑–¥–Ω–æ–≥–æ –ø–µ–ø–ª–∞, –¥–∞—Ä—è –æ–≥—Ä–æ–º–Ω—ã–π –¥–æ—Ö–æ–¥."),
    ("sigma_spider",          520000, "üï∑Ô∏è","–°–∏–≥–º–∞ –ü–∞—É–∫",               "ultra", 98_000_000,
        "–¢–∫–∞–Ω—å –∏–∑ —Å–∏–≥–º, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –º–æ–Ω–µ—Ç—ã."),
    ("omega_unicorn",         530000, "ü¶Ñ","–û–º–µ–≥–∞ –ï–¥–∏–Ω–æ—Ä–æ–≥",           "ultra",100_000_000,
        "–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–æ–≥, –∫–∞–∂–¥—ã–π —É–¥–∞—Ä ‚Äì –∑–æ–ª–æ—Ç–æ–π –≤–∑—Ä—ã–≤."),
    # ------------------- –ú–ï–ì–ê‚Äë–°–£–ü–ï–†‚Äë–°–ï–ö–†–ï–¢–ù–´–ï (10 –Ω–æ–≤—ã—Ö) -------------------
    ("galactic_overlord", 1_000_000, "üëë", "–ì–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –û–≤–µ—Ä–ª–æ—Ä–¥", "ultra",
        1_000_000_000_000,
        "–í–ª–∞–¥—ã–∫–∞ –≤—Å–µ–π –≤—Å–µ–ª–µ–Ω–Ω–æ–π ‚Äì –∫–∞–∂–¥—ã–π —á–∞—Å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç—Ä–∏–ª–ª–∏–æ–Ω—ã –º–æ–Ω–µ—Ç."),
    ("quantum_nihility",  1_200_000, "‚öõÔ∏è", "–ö–≤–∞–Ω—Ç–æ–≤–æ–µ –ù–∏—á—Ç–æ",        "ultra",
        2_000_000_000_000,
        "–°—É—â–µ—Å—Ç–≤—É–µ—Ç –≤–Ω–µ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏, —Å–æ–∑–¥–∞—ë—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –ø–æ—Ç–æ–∫ –º–æ–Ω–µ—Ç."),
    ("void_eternity",     1_400_000, "üåÄ", "–í–µ—á–Ω–æ—Å—Ç—å –ü—É—Å—Ç–æ—Ç—ã",       "ultra",
        3_000_000_000_000,
        "–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª, –∫–∞–∂–¥—ã–π —Ç–∏–∫ ‚Äì –º–∏–ª–ª–∏–∞—Ä–¥—ã –º–æ–Ω–µ—Ç."),
    ("time_anomaly",      1_600_000, "‚è≥", "–ê–Ω–æ–º–∞–ª–∏—è –í—Ä–µ–º–µ–Ω–∏",       "ultra",
        5_000_000_000_000,
        "–ò—Å–∫–∞–∂–∞–µ—Ç –≤—Ä–µ–º—è, –∫–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç –ø—Ä–∏–Ω–æ—Å–∏—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –¥–æ—Ö–æ–¥."),
    ("omniscient_being",  1_800_000, "üëÅÔ∏è", "–í—Å–µ–≤–∏–¥—è—â–µ–µ –°—É—â–µ—Å—Ç–≤–æ",    "ultra",
        10_000_000_000_000,
        "–ó–Ω–∞–µ—Ç –≤—Å—ë, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–æ–Ω–µ—Ç—ã –±—ã—Å—Ç—Ä–µ–µ —Å–≤–µ—Ç–∞."),
    ("Rick",  3_000_000, "üêï‚Äçü¶∫", "–î—å—è–≤–æ–ª—å—Å–∫–∞—è —Å–æ–±–∞–∫–∞",    "ultra",
        20_000_000_000_000,
        "–ü—Ä–æ—Å—Ç–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç."),
    ("Galac", 3_500_000, "‚òÑÔ∏è", "–ì—Ä–∞–≤–∏—Ç–æ–Ω–Ω—ã–π –≥–µ–∫–∫–æ–Ω ¬´–ö—Ä–∞–π–∑—É–±¬ª",    "ultra",
        25_000_000_000_000,
        "–ú–æ–∂–µ—Ç ¬´–ø—Ä—ã–≥–∞—Ç—å¬ª –º–µ–∂–¥—É –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ ¬´–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏¬ª, –∏—Å–ø–æ–ª—å–∑—É—è –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏—Å–∫—Ä–∏–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞, –ø–æ—á—Ç–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞—è—Å—å –Ω–∞ —Å–æ—Ç–Ω–∏ –∫–∏–ª–æ–º–µ—Ç—Ä–æ–≤."),
    ("Osminog",  4_500_000, "üêô", " –ü—É–ª—å—Å–∏—Ä—É—é—â–∏–π –º–æ—Ä—Å–∫–æ–π ¬´–ó–≤—ë–∑–¥–Ω—ã–π –æ—Å—å–º–∏–Ω–æ–≥¬ª",    "ultra",
        33_000_000_000_000,
        " –ú–æ–∂–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ—ë –±–∏–æ–ª—é–º–∏–Ω–µ—Å—Ü–µ–Ω—Ç–Ω–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ —Å –∫–æ—Å–º–∏—á–µ—Å–∫–∏–º–∏ –ø—É–ª—å—Å–∞—Ü–∏—è–º–∏, —Å–æ–∑–¥–∞–≤–∞—è ¬´–∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ¬ª —Å–∏–≥–Ω–∞–ª—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ –≤–∏–¥–∞–º–∏."),
    ("pes",  6_000_000, "ü¶ï", "–ü–µ—Å—á–∞–Ω—ã–π –∫–∏–±–µ—Ä‚Äë–º–æ–ª—å",    "ultra",
        45_000_000_000_000,
        "–ú–æ–ª—å –º–æ–∂–µ—Ç ¬´–ø–ª—ã—Ç—å¬ª –ø–æ –º–∞–≥–Ω–∏—Ç–Ω—ã–º –ª–∏–Ω–∏—è–º –ø–æ–ª—è, –æ—Å—Ç–∞–≤–ª—è—è –∑–∞ —Å–æ–±–æ–π —Å–ª–µ–¥ –∏–∑ –∫—Ä–∏—Å—Ç–∞–ª–ª–∏—á–µ—Å–∫–æ–≥–æ –ø–µ–ø–ª–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–ª—É–∂–∏—Ç –∫–∞–∫ ¬´–º–∞—Ä—à—Ä—É—Ç–Ω—ã–π —Å–∏–≥–Ω–∞–ª¬ª –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –æ—Å–æ–±–µ–π."),
    ("trrr",  10_000_000, "ü¶ä", "–õ—É–Ω–Ω—ã–π ¬´–¢–∫–∞–Ω–µ–≤—ã–π –ª–∏—Å¬ª",    "ultra",
        60_000_000_000_000,
        "–ú–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å —Ñ–æ—Ä–º—É —Å–≤–æ–µ–≥–æ —Ç–µ–ª–∞, ¬´—Ä–∞—Å—Ç—è–≥–∏–≤–∞—è¬ª –∏–ª–∏ ¬´—Å–∂–∏–º–∞—è¬ª —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–∏—Ç–∏, —Ç–µ–º —Å–∞–º—ã–º –ø—Ä—è—á–∞—Å—å –≤ —Ç–∫–∞–Ω–µ–≤—ã—Ö –ª–∞–±–∏—Ä–∏–Ω—Ç–∞—Ö."),
]

# ----------------------------------------------------------------------
#   –§–µ—Ä–º–µ—Ä—ã
# ----------------------------------------------------------------------
# (type, price, income_per_min, description)
FARMER_CONFIG: List[Tuple[str, int, int, str]] = [
    ("–ú–µ—Å—Ç–Ω—ã–π —Ñ–µ—Ä–º–µ—Ä",          100_000_000,   5_000,  "–ù–µ–±–æ–ª—å—à–æ–π —É—á–∞—Å—Ç–æ–∫, –¥–∞—ë—Ç +5‚ÄØ000‚ÄØü™ô/–º–∏–Ω."),
    ("–û–ø—ã—Ç–Ω—ã–π —Ñ–µ—Ä–º–µ—Ä",          500_000_000,  30_000,  "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ –≤—Å–µ—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö –Ω–∞ 5‚ÄØ%."),
    ("–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–µ—Ä–º–µ—Ä", 25_000_000_000, 150_000,
        "–£–º–Ω–æ–∂–∞–µ—Ç –¥–æ—Ö–æ–¥ –≤‚ÄØ2‚ÄØ—Ä–∞–∑–∞ –∏ –¥–∞—ë—Ç +15‚ÄØ% –∫ –æ–±—â–µ–º—É –¥–æ—Ö–æ–¥—É."),
    ("–ú–∞—Å—Ç–µ—Ä‚Äë—Ñ–µ—Ä–º–µ—Ä",           500_000_000_000,800_000,
        "–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π +800‚ÄØ000‚ÄØü™ô/–º–∏–Ω, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∂–∏–≤–æ—Ç–Ω—ã—Ö."),
    ("–≠–ø–∏—á–µ—Å–∫–∏–π —Ñ–µ—Ä–º–µ—Ä",        1_000_000_000_000,5_000_000,
        "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ –≤‚ÄØ5‚ÄØ—Ä–∞–∑, –∞ —Ç–∞–∫–∂–µ –¥–∞—ë—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å +5‚ÄØ% –∫ –¥–æ—Ö–æ–¥—É."),
    ("–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π —Ñ–µ—Ä–º–µ—Ä",      5_000_000_000_000,30_000_000,
        "–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –¥–æ—Ö–æ–¥ +30‚ÄØ–º–ª–Ω‚ÄØü™ô/–º–∏–Ω –∏ –¥–æ—Ö–æ–¥ –≤‚ÄØ10‚ÄØ—Ä–∞–∑."),
    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–µ—Ä–º–µ—Ä—ã
    ("–ì–µ—Ä–æ–π‚Äë—Ñ–µ—Ä–º–µ—Ä",            12_000_000_000_000, 80_000_000,
        "–°—É–ø–µ—Ä‚Äë–¥–æ—Ö–æ–¥ +80‚ÄØ–º–ª–Ω‚ÄØü™ô/–º–∏–Ω –∏ –¥–æ—Ö–æ–¥ –≤‚ÄØ15‚ÄØ—Ä–∞–∑."),
    ("–¢–∏—Ç–∞–Ω‚Äë—Ñ–µ—Ä–º–µ—Ä",            30_000_000_000_000, 200_000_000,
        "–ú–µ–≥–∞‚Äë–¥–æ—Ö–æ–¥ +200‚ÄØ–º–ª–Ω‚ÄØü™ô/–º–∏–Ω, –¥–æ—Ö–æ–¥ –≤‚ÄØ25‚ÄØ—Ä–∞–∑."),
    ("–ë–æ–≥‚Äë—Ñ–µ—Ä–º–µ—Ä",              1_000_000_000_000_000, 500_000_000,
        "–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–æ—Ö–æ–¥ +500‚ÄØ–º–ª–Ω‚ÄØü™ô/–º–∏–Ω –∏ –¥–æ—Ö–æ–¥ –≤‚ÄØ50‚ÄØ—Ä–∞–∑."),
]
# –ö–∞—Ä—Ç–∏–Ω–∫–∏ —Ñ–µ—Ä–º–µ—Ä–æ–≤ (–º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–≤–æ–∏ —Å—Å—ã–ª–∫–∏)
FARMER_IMAGES: Dict[str, str] = {
    "–ú–µ—Å—Ç–Ω—ã–π —Ñ–µ—Ä–º–µ—Ä":          "https://i.postimg.cc/mkmgJD4J/437572358.jpg",
    "–û–ø—ã—Ç–Ω—ã–π —Ñ–µ—Ä–º–µ—Ä":          "https://i.postimg.cc/j5KqjNdB/813994320.jpg",
    "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–µ—Ä–º–µ—Ä": "https://i.postimg.cc/K8MmrQ1d/751751786.jpg",
    "–ú–∞—Å—Ç–µ—Ä‚Äë—Ñ–µ—Ä–º–µ—Ä":           "https://i.postimg.cc/q7rHcrV3/374351423.jpg",
    "–≠–ø–∏—á–µ—Å–∫–∏–π —Ñ–µ—Ä–º–µ—Ä":        "https://i.postimg.cc/PqqsV4JX/132823775.jpg",
    "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π —Ñ–µ—Ä–º–µ—Ä":      "https://i.postimg.cc/0NjF0yXr/722564872.jpg",
    "–ì–µ—Ä–æ–π‚Äë—Ñ–µ—Ä–º–µ—Ä":            "https://i.postimg.cc/W1bHs4vS/872206903.jpg",
    "–¢–∏—Ç–∞–Ω‚Äë—Ñ–µ—Ä–º–µ—Ä":            "https://i.postimg.cc/25LT5bXd/697384440.jpg",
    "–ë–æ–≥‚Äë—Ñ–µ—Ä–º–µ—Ä":              "https://i.postimg.cc/3xsmnLnp/290306363.jpg",
}
def get_farmer(name: str) -> Tuple[str, int, int, str] | None:
    for rec in FARMER_CONFIG:
        if rec[0].lower() == name.lower():
            return rec
    return None


# ----------------------------------------------------------------------
#   –ü–∞–≥–∏–Ω–∞—Ü–∏—è
# ----------------------------------------------------------------------
ITEMS_PER_PAGE = 10   # –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –≤ –º–∞–≥–∞–∑–∏–Ω–µ –∏ /pets


def paginate_items(items: List[Any], page: int) -> Tuple[List[Any], int]:
    total_pages = (len(items) - 1) // ITEMS_PER_PAGE + 1
    start = page * ITEMS_PER_PAGE
    end = start + ITEMS_PER_PAGE
    return items[start:end], total_pages


# ----------------------------------------------------------------------
#   –î–æ—Ö–æ–¥ (–≤—Å–µ –ø–∏—Ç–æ–º—Ü—ã, –¥–æ—Ö–æ–¥ = income_per_minute)
# ----------------------------------------------------------------------
def calculate_income_per_min(user: sqlite3.Row) -> int:
    """–í–æ–∑–≤—Ä–∞—Ç –¥–æ—Ö–æ–¥–∞ –∑–∞ –æ–¥–Ω—É –º–∏–Ω—É—Ç—É."""
    now = time.time()
    mult = 1.0
    # –û–±—ã—á–Ω—ã–π –∫–æ—Ä–º ‚Äì +40‚ÄØ%
    if now < user["feed_bonus_end"]:
        mult *= 1.4
    # –û—Å–µ–Ω–Ω–∏–π –∫–æ—Ä–º ‚Äì √ó2
    if now < user["autumn_bonus_end"]:
        mult *= 2.0
    base = 0
    for field, inc, *_ in ANIMAL_CONFIG:
        base += user[field] * inc
    # –î–æ—Ö–æ–¥ –æ—Ç —Ñ–µ—Ä–º–µ—Ä–æ–≤
    cur.execute("SELECT farmer_type, qty FROM farmers WHERE user_id = ?", (user["user_id"],))
    for row in cur.fetchall():
        farmer = get_farmer(row["farmer_type"])
        if farmer:
            _, _, farmer_income, _ = farmer
            base += farmer_income * row["qty"]
    base += user["custom_income"]
    base = int(base * mult)
    return max(1, base) if base > 0 else 0


# ----------------------------------------------------------------------
#   –ê–≤—Ç–æ—Å–±–æ—Ä –¥–æ—Ö–æ–¥–∞ (–∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É)
# ----------------------------------------------------------------------
async def auto_collect(context: ContextTypes.DEFAULT_TYPE) -> None:
    """–ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –Ω–∞—á–∏—Å–ª—è–µ–º –¥–æ—Ö–æ–¥."""
    cur.execute("SELECT user_id FROM users")
    for (uid,) in cur.fetchall():
        user = get_user(uid)
        earned = calculate_income_per_min(user)
        if earned == 0:
            continue
        new_coins = min(user["coins"] + earned, MAX_INT)
        new_weekly = min(user["weekly_coins"] + earned, MAX_INT)
        update_user(uid, coins=new_coins, weekly_coins=new_weekly)
        log_user_action(uid, f"–ü–æ–ª—É—á–µ–Ω–æ {earned}ü™ô (–∞–≤—Ç–æ—Å–±–æ—Ä)")


# ----------------------------------------------------------------------
#   –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ–ª–æ–¥–∞ (–∫–∞–∂–¥—ã–µ 5‚ÄØ–º–∏–Ω)
# ----------------------------------------------------------------------
async def check_hunger(context: ContextTypes.DEFAULT_TYPE) -> None:
    cur.execute("SELECT user_id FROM users")
    for (uid,) in cur.fetchall():
        user = get_user(uid)
        for field, _, _, _, _, _, _ in ANIMAL_CONFIG:
            cnt = user[field]
            if cnt == 0:
                continue
            last_fed = get_pet_last_fed(uid, field)
            if last_fed is None:
                set_pet_last_fed(uid, field, int(time.time()))
                continue
            if time.time() - last_fed > HUNGER_TIME:
                update_user(uid, **{field: 0})
                delete_pet_last_fed(uid, field)
                log_user_action(uid, f"–ü–æ—Ç–µ—Ä—è–Ω–æ –≤—Å–µ—Ö {field} –∏–∑‚Äë–∑–∞ –≥–æ–ª–æ–¥–∞")


# ----------------------------------------------------------------------
#   –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–∏–ª–µ—Ç
# ----------------------------------------------------------------------
def give_daily_ticket(user: sqlite3.Row) -> bool:
    now = int(time.time())
    if now - user["last_ticket_time"] >= 86400:
        update_user(
            user["user_id"],
            tickets=user["tickets"] + 1,
            last_ticket_time=now,
        )
        return True
    return False


# ----------------------------------------------------------------------
#   –¢–∏—Ç—É–ª—ã (–±–æ–ª—å—à–æ–π –Ω–∞–±–æ—Ä ¬´–ø—Ä–∏–∫–æ–ª—å–Ω—ã—Ö¬ª –Ω–∞–∑–≤–∞–Ω–∏–π)
# ----------------------------------------------------------------------
TITLE_TABLE: List[Tuple[int, str]] = [
    (0, "–ù–æ–≤–∏—á–æ–∫ üê£"),
    (500, "–§–µ—Ä–º–µ—Ä üåæ"),
    (1_000, "–°–∞–∂–µ–Ω–µ—Ü üå±"),
    (2_500, "–ü–æ—á–≤–æ–≤–µ–¥ üåç"),
    (5_000, "–ü–ª–∞–Ω—Ç–∞—Ç–æ—Ä üåø"),
    (7_500, "–ê–≥—Ä–æ–∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä üöú"),
    (10_000, "–¢—Ä–∞–∫—Ç–æ—Ä–∏—Å—Ç üöú"),
    (12_500, "–°–µ–ª—å—Å–∫–∏–π –º–∞–≥ üßô‚Äç‚ôÇÔ∏è"),
    (15_000, "–•–æ–∑—è–∏–Ω –ø–æ–ª–µ–π üèûÔ∏è"),
    (20_000, "–ó–æ–ª–æ—Ç–æ–π –ø–∞—Ö–∞—Ä—å ü™ô"),
    (25_000, "–ö—É–∑–Ω–µ—Ü —É—Ä–æ–∂–∞—è ‚öíÔ∏è"),
    (30_000, "–≠–∫—Å–ø–µ—Ä—Ç –∞–≥—Ä–æ üß™"),
    (35_000, "–ë–∏–æ–∏–Ω–∂–µ–Ω–µ—Ä üß¨"),
    (40_000, "–ú–∞—Å—Ç–µ—Ä —Ñ–µ—Ä–º—ã üèÜ"),
    (45_000, "–õ–µ–≥–µ–Ω–¥–∞ –ø–∞—Ö–æ—Ç–Ω—ã—Ö –∑–µ–º–µ–ª—å üåæ"),
    (50_000, "–°—É–ø–µ—Ä—Ñ–µ—Ä–º–µ—Ä ü¶∏‚Äç‚ôÇÔ∏è"),
    (60_000, "–ö–æ—Ä–æ–ª—å —É—Ä–æ–∂–∞—è üëë"),
    (70_000, "–ò–º–ø–µ—Ä–∞—Ç–æ—Ä –∑–µ—Ä–Ω–∞ üëë"),
    (80_000, "–ì—Ä–æ—Å—Å–º–µ–π—Å—Ç–µ—Ä —Ñ–µ—Ä–º—ã üèÖ"),
    (90_000, "–ë–æ–≥ —É—Ä–æ–∂–∞—è üïäÔ∏è"),
    (100_000, "–ú–∞–≥–Ω–∞—Ç üí∞"),
    (125_000, "–¢–∏—Ç–∞–Ω —Å–µ–ª—å—Å–∫–æ–≥–æ —Ö–æ–∑—è–π—Å—Ç–≤–∞ üóø"),
    (150_000, "–í–ª–∞–¥—ã–∫–∞ –ø–æ–ª–µ–π üè∞"),
    (175_000, "–ü–æ–∫—Ä–æ–≤–∏—Ç–µ–ª—å –∑–µ–º–ª–∏ üåç"),
    (200_000, "–ü–æ–≤–µ–ª–∏—Ç–µ–ª—å –ø–æ—Å–µ–≤–æ–≤ üåæ"),
    (250_000, "–°–æ–ª–Ω–µ—á–Ω—ã–π —Ñ–µ—Ä–º–µ—Ä ‚òÄÔ∏è"),
    (300_000, "–ì–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –∞–≥—Ä–æ–Ω–æ–º üåå"),
    (350_000, "–ó–≤—ë–∑–¥–Ω—ã–π –∑–µ–º–ª–µ–¥–µ–ª–µ—Ü üå†"),
    (400_000, "–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π —Ñ–µ—Ä–º–µ—Ä üöÄ"),
    (500_000, "–õ–µ–≥–µ–Ω–¥–∞ üèÜ"),
    (750_000, "–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π –∞–≥—Ä–æ–Ω–æ–º üê≤"),
    (1_000_000, "–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ñ–µ—Ä–º–µ—Ä üëº"),
    (2_000_000, "–≠–ø–∏—á–µ—Å–∫–∏–π –º–∞–≥–Ω–∞—Ç üèÖ"),
    (5_000_000, "–ë–µ—Å—Å–º–µ—Ä—Ç–Ω—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü üåå"),
    (10_000_000, "–¢–∏—Ç–∞–Ω —ç–ø–æ—Ö–∏ üèõÔ∏è"),
]


def get_status(coins: int) -> str:
    """–í—ã–±–∏—Ä–∞–µ—Ç —Å–∞–º—ã–π –≤—ã—Å–æ–∫–∏–π —Ç–∏—Ç—É–ª, –Ω–µ –ø—Ä–µ–≤—ã—à–∞—é—â–∏–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç."""
    title = "–ù–æ–≤–∏—á–æ–∫ üê£"
    for limit, name in TITLE_TABLE:
        if coins >= limit:
            title = name
        else:
            break
    return title


# ----------------------------------------------------------------------
#   –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
# ----------------------------------------------------------------------
def chunk_buttons(
    buttons: List[InlineKeyboardButton], per_row: int = 3
) -> List[List[InlineKeyboardButton]]:
    return [buttons[i: i + per_row] for i in range(0, len(buttons), per_row)]


# ----------------------------------------------------------------------
#   –°–µ–∑–æ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º
# ----------------------------------------------------------------------
def check_and_reset_season() -> None:
    """–ï—Å–ª–∏ –ø—Ä–æ—à—ë–ª SEASON_LENGTH, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å—ë –∏ –Ω–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—ã–π —Å–µ–∑–æ–Ω."""
    cur.execute("SELECT season_start, season_number FROM global_settings WHERE id = 1")
    row = cur.fetchone()
    now = int(time.time())
    if now - row["season_start"] >= SEASON_LENGTH:
        # –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å (—É–¥–∞–ª—è–µ–º –≤—Å—ë)
        _execute("DELETE FROM users")
        _execute("DELETE FROM pet_last_fed")
        _execute("DELETE FROM decorations")
        _execute("DELETE FROM lottery")
        _execute("DELETE FROM boosters")
        _execute("DELETE FROM promo_codes")
        _execute("DELETE FROM farmers")
        new_start = now
        new_number = row["season_number"] + 1
        _execute(
            "UPDATE global_settings SET season_start = ?, season_number = ? WHERE id = 1",
            (new_start, new_number),
        )
        log.info("–°–µ–∑–æ–Ω —Å–±—Ä–æ—à–µ–Ω. –ù–æ–≤—ã–π —Å–µ–∑–æ–Ω ‚Ññ%s", new_number)


def get_season_info() -> Tuple[int, int]:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç (—Å–µ–∫—É–Ω–¥ –¥–æ –∫–æ–Ω—Ü–∞ —Å–µ–∑–æ–Ω–∞, –Ω–æ–º–µ—Ä —Ç–µ–∫—É—â–µ–≥–æ —Å–µ–∑–æ–Ω–∞)."""
    cur.execute("SELECT season_start, season_number FROM global_settings WHERE id = 1")
    row = cur.fetchone()
    now = int(time.time())
    left = max(0, SEASON_LENGTH - (now - row["season_start"]))
    return left, row["season_number"]


# ----------------------------------------------------------------------
#   –û–±—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤ —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π ‚Üê NEW
# ----------------------------------------------------------------------
async def edit_section(
    query,
    caption: str,
    image_key: str,
    reply_markup: InlineKeyboardMarkup | None = None,
) -> None:
    """–†–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –∑–∞–º–µ–Ω—è—è —Ñ–æ—Ç–æ –Ω–∞ —Ñ–æ—Ç–æ –∏–∑ SECTION_IMAGES[image_key]."""
    img = SECTION_IMAGES.get(image_key, MAIN_MENU_IMG)  # fallback
    await query.edit_message_media(
        media=InputMediaPhoto(media=img, caption=caption),
        reply_markup=reply_markup,
    )


# ----------------------------------------------------------------------
#   –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
# ----------------------------------------------------------------------
def build_main_menu(user_id: int) -> InlineKeyboardMarkup:
    rows = []
    rows.append([InlineKeyboardButton("‚ÑπÔ∏è –û –±–æ—Ç–µ", callback_data="about")])
    other = [
        InlineKeyboardButton("üåæ –ú–æ—è —Ñ–µ—Ä–º–∞", callback_data="farm"),
        InlineKeyboardButton("üõí –ú–∞–≥–∞–∑–∏–Ω", callback_data="shop"),
        InlineKeyboardButton("üë®‚Äçüåæ –§–µ—Ä–º–µ—Ä—ã", callback_data="farmers_shop"),
        InlineKeyboardButton("üìä –°—Ç–∞—Ç—É—Å", callback_data="status"),
        InlineKeyboardButton("üí∞ –ü–æ–ª—É—á–∏—Ç—å –º–æ–Ω–µ—Ç—ã", callback_data="get_coins"),
        InlineKeyboardButton("üé∞ –ö–∞–∑–∏–Ω–æ", callback_data="casino_info"),
        InlineKeyboardButton("üéüÔ∏è –ü—Ä–æ–º–æ–∫–æ–¥—ã", callback_data="promo"),
        InlineKeyboardButton("üçÇ –û—Å–µ–Ω–Ω–µ–µ —Å–æ–±—ã—Ç–∏–µ", callback_data="autumn_event"),
    ]
    rows.extend(chunk_buttons(other, per_row=3))
    if is_admin(user_id):
        rows.append([InlineKeyboardButton("üî• –ê–¥–º–∏–Ω", callback_data="admin")])
    return InlineKeyboardMarkup(rows)


# ----------------------------------------------------------------------
#   –ü–æ–∫–∞–∑ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é
# ----------------------------------------------------------------------
async def show_main_menu(
    update: Update, context: ContextTypes.DEFAULT_TYPE, edit: bool = False
) -> None:
    user = update.effective_user
    db_user = get_user(user.id)
    ticket_msg = (
        "\nüéüÔ∏è –¢—ã –ø–æ–ª—É—á–∏–ª 1 –±–∏–ª–µ—Ç –∑–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –≤—Ö–æ–¥!"
        if give_daily_ticket(db_user)
        else ""
    )
    text = f"ü§ñ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –§–µ—Ä–º—É!{ticket_msg}"
    kb = build_main_menu(user.id)
    if edit:
        query = update.callback_query
        await edit_section(query, caption=text, image_key="main", reply_markup=kb)
    else:
        await update.message.reply_photo(
            MAIN_MENU_IMG,
            caption=text,
            reply_markup=kb,
        )


# ----------------------------------------------------------------------
#   –û –±–æ—Ç–µ
# ----------------------------------------------------------------------
async def about_section(query) -> None:
    text = (
        "–û –±–æ—Ç–µ ¬´–§–µ—Ä–º–∞¬ª\n"
        "–≠—Ç–æ –ø—Ä–æ—Å—Ç–∞—è —Ñ–µ—Ä–º–∞ –≤ Telegram. –í—ã –ø–æ–∫—É–ø–∞–µ—Ç–µ –∂–∏–≤–æ—Ç–Ω—ã—Ö, –ø–æ–ª—É—á–∞–µ—Ç–µ –¥–æ—Ö–æ–¥, "
        "–∫–æ—Ä–º–∏—Ç–µ –∏—Ö, —É–ª—É—á—à–∞–µ—Ç–µ –±–∞–∑—É, –∏–≥—Ä–∞–µ—Ç–µ –≤ –º–∏–Ω–∏‚Äë–∫–∞–∑–∏–Ω–æ –∏ –º–æ–∂–µ—Ç–µ –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏.\n\n"
        f"–ß–∞—Ç –ø—Ä–æ–µ–∫—Ç–∞: {CHAT_LINK}\n"
        f"–ö–∞–Ω–∞–ª –ø—Ä–æ–µ–∫—Ç–∞: {CHANNEL_LINK}\n\n"
        "–£–¥–∞—á–Ω–æ–π —Ñ–µ—Ä–º—ã! üêìüêÑüêñ"
    )
    btn = InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="back")
    await edit_section(
        query,
        caption=text,
        image_key="about",
        reply_markup=InlineKeyboardMarkup([[btn]]),
    )


# ----------------------------------------------------------------------
#   –ú–æ—è —Ñ–µ—Ä–º–∞ (–±–µ–∑ –∫–Ω–æ–ø–∫–∏ ¬´–ü–µ—Ä–µ—Ä–æ–¥–∏—Ç—å—Å—è¬ª, –±–µ–∑ X‚Äë—Ñ–µ—Ä–º—ã)
# ----------------------------------------------------------------------
async def farm_section(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    uid = query.from_user.id
    user = get_user(uid)
    now = time.time()
    # –°–ø–∏—Å–æ–∫ –∂–∏–≤–æ—Ç–Ω—ã—Ö
    lines = []
    for field, inc, emoji, name, *_ in ANIMAL_CONFIG:
        cnt = user[field]
        if cnt == 0:
            continue
        inc_total = inc * cnt
        last_fed = get_pet_last_fed(uid, field)
        timer = "‚Äî"
        if last_fed:
            left = int(HUNGER_TIME - (now - last_fed))
            if left > 0:
                h, r = divmod(left, 3600)
                m = r // 60
                timer = f"‚è≥ {h}—á {m}–º"
        lines.append(
            f"{emoji} {name}: {cnt} (+{format_num(inc_total)}ü™ô/–º–∏–Ω) {timer}"
        )
    farm_text = "\n".join(lines) or "‚ùå –ù–∞ —Ñ–µ—Ä–º–µ –ø–æ–∫–∞ –Ω–µ—Ç –∂–∏–≤–æ—Ç–Ω—ã—Ö."
    # –°–ø–∏—Å–æ–∫ —Ñ–µ—Ä–º–µ—Ä–æ–≤
    cur.execute("SELECT farmer_type, qty FROM farmers WHERE user_id = ?", (uid,))
    farmer_rows = cur.fetchall()
    farmer_lines = []
    for fr in farmer_rows:
        f_type = fr["farmer_type"]
        qty = fr["qty"]
        rec = get_farmer(f_type)
        if rec:
            _, _, inc, _ = rec
            farmer_lines.append(
                f"üë®‚Äçüåæ {f_type}: {qty} ( +{format_num(inc * qty)}ü™ô/–º–∏–Ω )"
            )
    farmer_text = "\n".join(farmer_lines) if farmer_lines else "‚öíÔ∏è –§–µ—Ä–º–µ—Ä–æ–≤ –Ω–µ—Ç."
    # –ò–Ω—Ñ–æ –æ –±—É—Å—Ç–∞—Ö
    boost_parts = []
    if now < user["feed_bonus_end"]:
        left = int(user["feed_bonus_end"] - now)
        h, r = divmod(left, 3600)
        m = r // 60
        boost_parts.append(f"üçé –û–±—ã—á–Ω—ã–π –∫–æ—Ä–º: +40% ({h}—á {m}–º)")
    if now < user["autumn_bonus_end"]:
        left = int(user["autumn_bonus_end"] - now)
        h, r = divmod(left, 3600)
        m = r // 60
        boost_parts.append(f"üçÇ –û—Å–µ–Ω–Ω–∏–π –∫–æ—Ä–º: √ó2 ({h}—á {m}–º)")
    boost_line = "\n".join(boost_parts) if boost_parts else "‚ö° –ë—É—Å—Ç–æ–≤ –Ω–µ—Ç"
    # –ö–Ω–æ–ø–∫–∏ –≤–Ω—É—Ç—Ä–∏ —Ñ–µ—Ä–º—ã (–±–µ–∑ ¬´–ü–µ—Ä–µ—Ä–æ–¥–∏—Ç—å—Å—è¬ª)
    btns = [
        InlineKeyboardButton("üçé –ö–æ—Ä–º–∏—Ç—å –∂–∏–≤–æ—Ç–Ω—ã—Ö", callback_data="feed_animal"),
        InlineKeyboardButton("üìâ –ü—Ä–æ–¥–∞—Ç—å –∂–∏–≤–æ—Ç–Ω—ã—Ö", callback_data="sell_animal"),
        InlineKeyboardButton("üèóÔ∏è –£–ª—É—á—à–∏—Ç—å –±–∞–∑—É", callback_data="upgrade_base"),
        InlineKeyboardButton("üèÜ –¢–æ–ø —Ñ–µ—Ä–º–µ—Ä–æ–≤", callback_data="top"),
        InlineKeyboardButton("‚¨ÖÔ∏è –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="back"),
    ]
    kb = InlineKeyboardMarkup(chunk_buttons(btns, per_row=2))
    await edit_section(
        query,
        caption=(
            f"üåæ –§–µ—Ä–º–∞ üåæ\n"
            f"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n"
            f"üí∞ –ú–æ–Ω–µ—Ç—ã: {format_num(user['coins'])}\n"
            f"üí∞ –î–æ—Ö–æ–¥ –∑–∞ –º–∏–Ω—É—Ç—É: {format_num(calculate_income_per_min(user))}ü™ô\n"
            f"üèóÔ∏è –ë–∞–∑–∞: —É—Ä–æ–≤–µ–Ω—å {user['base_level']} (–ª–∏–º–∏—Ç: {user['pet_limit']})\n"
            f"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n"
            f"{boost_line}\n"
            f"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n"
            f"{farm_text}\n"
            f"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n"
            f"{farmer_text}"
        ),
        image_key="farm",
        reply_markup=kb,
    )


# ----------------------------------------------------------------------
#   –ö–æ—Ä–º–ª–µ–Ω–∏–µ –∂–∏–≤–æ—Ç–Ω—ã—Ö
# ----------------------------------------------------------------------
async def feed_animal_step(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    uid = query.from_user.id
    user = get_user(uid)
    # –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∏–ø—ã –∫–æ—Ä–º–∞
    feed_type_btns = []
    if user["feed"] > 0:
        feed_type_btns.append(
            InlineKeyboardButton("üçé –û–±—ã—á–Ω—ã–π –∫–æ—Ä–º", callback_data="feed_type_normal")
        )
    if user["autumn_feed"] > 0:
        feed_type_btns.append(
            InlineKeyboardButton("üçÇ –û—Å–µ–Ω–Ω–∏–π –∫–æ—Ä–º", callback_data="feed_type_autumn")
        )
    if not feed_type_btns:
        await edit_section(
            query,
            caption="‚ùå –£ –≤–∞—Å –Ω–µ—Ç –Ω–∏ –æ–±—ã—á–Ω–æ–≥–æ, –Ω–∏ –æ—Å–µ–Ω–Ω–µ–≥–æ –∫–æ—Ä–º–∞!",
            image_key="farm",
            reply_markup=InlineKeyboardMarkup(
                [[InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="farm")]]
            ),
        )
        return
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–∏–ø –∫–æ—Ä–º–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äì –ø–µ—Ä–≤—ã–π –¥–æ—Å—Ç—É–ø–Ω—ã–π)
    context.user_data["feed_type"] = "normal" if user["feed"] > 0 else "autumn"
    # –í—ã–±–∏—Ä–∞–µ–º –∂–∏–≤–æ—Ç–Ω–æ–µ
    animal_btns = []
    for field, _, emoji, name, *_ in ANIMAL_CONFIG:
        if user[field] > 0:
            animal_btns.append(
                InlineKeyboardButton(f"{emoji} {name}", callback_data=f"feed_{field}")
            )
    if not animal_btns:
        await edit_section(
            query,
            caption="‚ùå –£ –≤–∞—Å –Ω–µ—Ç –∂–∏–≤–æ—Ç–Ω—ã—Ö!",
            image_key="farm",
            reply_markup=InlineKeyboardMarkup(
                [[InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="farm")]]
            ),
        )
        return
    animal_btns.append(InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="farm"))
    kb = InlineKeyboardMarkup(chunk_buttons(animal_btns, per_row=3))
    await edit_section(
        query,
        caption="üçé –í—ã–±–µ—Ä–∏—Ç–µ –∂–∏–≤–æ—Ç–Ω–æ–µ –¥–ª—è –∫–æ—Ä–º–ª–µ–Ω–∏—è:",
        image_key="farm",
        reply_markup=kb,
    )


async def feed_type_chosen(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤—ã–±–æ—Ä —Ç–∏–ø–∞ –∫–æ—Ä–º–∞ (–æ–±—ã—á–Ω—ã–π/–æ—Å–µ–Ω–Ω–∏–π)."""
    feed_type = query.data.split("_")[-1]          # normal / autumn
    context.user_data["feed_type"] = feed_type
    await edit_section(
        query,
        caption=f"‚úÖ –í—ã–±—Ä–∞–Ω {'–æ–±—ã—á–Ω—ã–π' if feed_type == 'normal' else '–æ—Å–µ–Ω–Ω–∏–π'} –∫–æ—Ä–º. –í—ã–±–µ—Ä–∏—Ç–µ –∂–∏–≤–æ—Ç–Ω–æ–µ:",
        image_key="farm",
        reply_markup=query.message.reply_markup,
    )


async def feed_animal(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–ö–æ—Ä–º–∏–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ç–∏–ø–æ–º –∫–æ—Ä–º–∞."""
    uid = query.from_user.id
    user = get_user(uid)
    animal = query.data.split("_", 1)[1]           # field name
    feed_type = context.user_data.get("feed_type", "normal")
    if feed_type == "normal":
        if user["feed"] == 0:
            await edit_section(
                query,
                caption="‚ùå –ù–µ—Ç –æ–±—ã—á–Ω–æ–≥–æ –∫–æ—Ä–º–∞!",
                image_key="farm",
                reply_markup=InlineKeyboardMarkup(
                    [[InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="farm")]]
                ),
            )
            return
        update_user(
            uid,
            feed=user["feed"] - 1,
            feed_bonus_end=int(time.time()) + 3600,
            reputation=user["reputation"] + 1,
        )
        log_user_action(uid, f"–ö–æ—Ä–º–∏–ª {animal} –æ–±—ã—á–Ω—ã–º –∫–æ—Ä–º–æ–º")
        bonus_text = "+40% –¥–æ—Ö–æ–¥–∞"
    else:   # autumn
        if user["autumn_feed"] == 0:
            await edit_section(
                query,
                caption="‚ùå –ù–µ—Ç –æ—Å–µ–Ω–Ω–µ–≥–æ –∫–æ—Ä–º–∞!",
                image_key="farm",
                reply_markup=InlineKeyboardMarkup(
                    [[InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="farm")]]
                ),
            )
            return
        update_user(
            uid,
            autumn_feed=user["autumn_feed"] - 1,
            autumn_bonus_end=int(time.time()) + 3600,
            reputation=user["reputation"] + 1,
        )
        log_user_action(uid, f"–ö–æ—Ä–º–∏–ª {animal} –æ—Å–µ–Ω–Ω–∏–º –∫–æ—Ä–º–æ–º")
        bonus_text = "√ó2 –¥–æ—Ö–æ–¥–∞"
    set_pet_last_fed(uid, animal, int(time.time()))
    await edit_section(
        query,
        caption=f"üçé {animal.capitalize()} –ø–æ–∫–æ—Ä–º–ª–µ–Ω! {bonus_text} –Ω–∞ 1‚ÄØ—á.",
        image_key="farm",
        reply_markup=InlineKeyboardMarkup(
            [[InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="farm")]]
        ),
    )


# ----------------------------------------------------------------------
#   –ü—Ä–æ–¥–∞–∂–∞ –∂–∏–≤–æ—Ç–Ω—ã—Ö
# ----------------------------------------------------------------------
async def sell_animal_step(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    uid = query.from_user.id
    user = get_user(uid)
    btns = []
    for field, _, emoji, name, _, price, _ in ANIMAL_CONFIG:
        if user[field] > 0:
            btns.append(
                InlineKeyboardButton(
                    f"üìâ {emoji} {name} ({user[field]} —à—Ç.)",
                    callback_data=f"sell_{field}"
                )
            )
    if not btns:
        await edit_section(
            query,
            caption="‚ùå –£ —Ç–µ–±—è –Ω–µ—Ç –∂–∏–≤–æ—Ç–Ω—ã—Ö –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏!",
            image_key="farm",
            reply_markup=InlineKeyboardMarkup(
                [[InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="farm")]]
            ),
        )
        return
    btns.append(InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="farm"))
    kb = InlineKeyboardMarkup(chunk_buttons(btns, per_row=2))
    await edit_section(
        query,
        caption="üìâ –í—ã–±–µ—Ä–∏—Ç–µ –ø–∏—Ç–æ–º—Ü–∞, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–∞—Ç—å:",
        image_key="farm",
        reply_markup=kb,
    )


async def sell_animal_quantity(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    pet_field = query.data.split("_", 1)[1]
    uid = query.from_user.id
    user = get_user(uid)
    qty_btns = [
        InlineKeyboardButton("1", callback_data=f"sell_qty_{pet_field}_1"),
        InlineKeyboardButton("5", callback_data=f"sell_qty_{pet_field}_5"),
        InlineKeyboardButton("10", callback_data=f"sell_qty_{pet_field}_10"),
        InlineKeyboardButton("üÖ∞Ô∏è –í—Å—ë", callback_data=f"sell_qty_{pet_field}_all"),
    ]
    kb = InlineKeyboardMarkup([qty_btns])
    await edit_section(
        query,
        caption=f"–°–∫–æ–ª—å–∫–æ {pet_field} –ø—Ä–æ–¥–∞—Ç—å? (—É –≤–∞—Å {user[pet_field]})",
        image_key="farm",
        reply_markup=kb,
    )


async def sell_animal_confirm(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∏."""
    parts = query.data.split("_")
    # –§–æ—Ä–º–∞—Ç: sell_qty_<field>_<qty>
    if len(parts) < 4:
        await query.edit_message_caption(caption="‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç.")
        return
    pet_field = "_".join(parts[2:-1])   # –≤—Å—ë –º–µ–∂–¥—É 2‚Äë–º –∏ –ø—Ä–µ–¥–ø–æ—Å–ª–µ–¥–Ω–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º
    qty_raw = parts[-1]
    rec = next((r for r in ANIMAL_CONFIG if r[0] == pet_field), None)
    if not rec:
        await query.edit_message_caption(caption="‚ùå –ü–∏—Ç–æ–º–µ—Ü –Ω–µ –Ω–∞–π–¥–µ–Ω.")
        return
    price = rec[5]                     # —Ü–µ–Ω–∞ –∑–∞ 1 —à—Ç.
    uid = query.from_user.id
    user = get_user(uid)
    owned = user[pet_field]
    qty = owned if qty_raw == "all" else int(qty_raw)
    qty = min(qty, owned)
    if qty <= 0:
        await query.edit_message_caption(caption="‚ùå –ù–µ—á–µ–≥–æ –ø—Ä–æ–¥–∞–≤–∞—Ç—å.")
        return
    reward = (price * qty) // 2      # 50‚ÄØ% –æ—Ç —Ü–µ–Ω—ã
    update_user(
        uid,
        **{pet_field: owned - qty},
        coins=user["coins"] + reward,
        weekly_coins=user["weekly_coins"] + reward,
        reputation=user["reputation"] + 1,
    )
    log_user_action(uid, f"–ü—Ä–æ–¥–∞–ª {qty} —à—Ç. {pet_field} –∑–∞ {reward}ü™ô")
    await edit_section(
        query,
        caption=(
            f"‚úÖ –í—ã –ø—Ä–æ–¥–∞–ª–∏ {qty} —à—Ç. `{pet_field}` –∑–∞ {format_num(reward)}ü™ô."
        ),
        image_key="farm",
        reply_markup=InlineKeyboardMarkup(
            [[InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="farm")]]
        ),
    )


# ----------------------------------------------------------------------
#   –£–ª—É—á—à–∏—Ç—å –±–∞–∑—É
# ----------------------------------------------------------------------
async def upgrade_base(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    uid = query.from_user.id
    user = get_user(uid)
    cost = BASE_UPGRADE_COST * (user["base_level"] + 1)
    if user["coins"] < cost:
        await edit_section(
            query,
            caption=f"‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç. –ù—É–∂–Ω–æ {format_num(cost)}ü™ô.",
            image_key="farm",
        )
        return
    new_level = user["base_level"] + 1
    new_limit = user["pet_limit"] + BASE_LIMIT_STEP
    update_user(
        uid,
        coins=user["coins"] - cost,
        base_level=new_level,
        pet_limit=new_limit,
    )
    log_user_action(uid, f"–£–ª—É—á—à–∏–ª –±–∞–∑—É –¥–æ —É—Ä–æ–≤–Ω—è {new_level}")
    await edit_section(
        query,
        caption=(
            f"‚úÖ –ë–∞–∑–∞ —É–ª—É—á—à–µ–Ω–∞! –ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å ‚Äì {new_level}\n"
            f"üß± –õ–∏–º–∏—Ç –ø–∏—Ç–æ–º—Ü–µ–≤ ‚Üë {new_limit}\n"
            f"üí∏ –ü–æ—Ç—Ä–∞—á–µ–Ω–æ {format_num(cost)}ü™ô."
        ),
        image_key="farm",
        reply_markup=InlineKeyboardMarkup(
            [[InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="farm")]]
        ),
    )


# ----------------------------------------------------------------------
#   –¢–æ–ø —Ñ–µ—Ä–º–µ—Ä–æ–≤ (—Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é, –ø–æ–±–µ–¥–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Ç–∞–π–Ω—ã–π –ø–∞—É–∫)
# ----------------------------------------------------------------------
async def top_farmers(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    now = int(time.time())
    week_sec = 604800
    # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–æ–ø —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é
    if now - (get_user(query.from_user.id)["last_reset"] or 0) >= week_sec:
        cur.execute(
            "SELECT user_id, weekly_coins FROM users ORDER BY weekly_coins DESC LIMIT 1"
        )
        leader = cur.fetchone()
        if leader:
            # –í—ã–¥–∞—ë–º —Ç–∞–π–Ω—ã–π –ø–∞—É–∫, –Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ–º
            update_user(leader["user_id"], secret_spider=1)
        _execute(
            "UPDATE users SET weekly_coins = 0, last_reset = ?, secret_spider = 0",
            (now,),
        )
    cur.execute(
        "SELECT username, weekly_coins, user_id FROM users ORDER BY weekly_coins DESC LIMIT 5"
    )
    top5 = cur.fetchall()
    txt = "üèÜ –¢–æ–ø —Ñ–µ—Ä–º–µ—Ä–æ–≤ (–Ω–µ–¥–µ–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥)\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n"
    for i, row in enumerate(top5, 1):
        name = row["username"] or f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {row['user_id']}"
        txt += f"{i}. {name} ‚Äî {format_num(row['weekly_coins'])}ü™ô\n"
    left = max(0, week_sec - (now - (get_user(query.from_user.id)["last_reset"] or 0)))
    h, r = divmod(left, 3600)
    m = r // 60
    txt += f"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nüï∑Ô∏è –î–æ —Ç–∞–π–Ω–æ–≥–æ –ø–∞—É–∫–∞: {h}—á {m}–º"
    await edit_section(
        query,
        caption=txt,
        image_key="top",
        reply_markup=InlineKeyboardMarkup(
            [[InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="farm")]]
        ),
    )


# ----------------------------------------------------------------------
#   –°—Ç–∞—Ç—É—Å
# ----------------------------------------------------------------------
async def status_section(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    uid = query.from_user.id
    user = get_user(uid)
    income_min = calculate_income_per_min(user)
    left, season_number = get_season_info()
    h, r = divmod(left, 3600)
    m = r // 60
    text = (
        f"üìä –°—Ç–∞—Ç—É—Å üìä\n"
        f"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n"
        f"üÜî ID: {user['user_id']}\n"
        f"üí∞ –ú–æ–Ω–µ—Ç—ã: {format_num(user['coins'])}\n"
        f"üí∞ –î–æ—Ö–æ–¥ –∑–∞ –º–∏–Ω—É—Ç—É: {format_num(income_min)}ü™ô\n"
        f"üèóÔ∏è –ë–∞–∑–∞: —É—Ä–æ–≤–µ–Ω—å {user['base_level']} (–ª–∏–º–∏—Ç: {user['pet_limit']})\n"
        f"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n"
        f"üéüÔ∏è –ë–∏–ª–µ—Ç–æ–≤: {user['tickets']}\n"
        f"üí¨ –†–µ–ø—É—Ç–∞—Ü–∏—è: {user['reputation']}\n"
        f"‚ö° –¢–∏—Ç—É–ª: {get_status(user['coins'])}\n"
        f"üï∑Ô∏è –ü–∞—É–∫‚Äë—Å–µ–∫—Ä–µ—Ç: {'–î–∞' if user['secret_spider'] else '–ù–µ—Ç'}\n"
        f"‚è≥ –î–æ –∫–æ–Ω—Ü–∞ —Å–µ–∑–æ–Ω–∞ ‚Ññ{season_number}: {h}—á {m}–º\n"
        f"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
    )
    back_btn = InlineKeyboardButton("‚¨ÖÔ∏è –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="back")
    kb = InlineKeyboardMarkup([[back_btn]])
    await edit_section(
        query,
        caption=text,
        image_key="status",
        reply_markup=kb,
    )


# ----------------------------------------------------------------------
#   –ü–æ–ª—É—á–∏—Ç—å –º–æ–Ω–µ—Ç—ã (–∑–∞–¥–∞–Ω–∏—è)
# ----------------------------------------------------------------------
async def get_coins_menu(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è."""
    btns = [
        InlineKeyboardButton("ü§ù –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞", callback_data="task_referral"),
        InlineKeyboardButton("üîπ –ö–ª–∏–∫–Ω—É—Ç—å (1‚Äë5 –º–æ–Ω–µ—Ç)", callback_data="task_click"),
        InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="back"),
    ]
    kb = InlineKeyboardMarkup(chunk_buttons(btns, per_row=2))
    await edit_section(
        query,
        caption="üí∞ –ü–æ–ª—É—á–∏—Ç—å –º–æ–Ω–µ—Ç—ã ‚Äì –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–¥–∞–Ω–∏—è –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –Ω–∞–≥—Ä–∞–¥—ã!",
        image_key="coins",
        reply_markup=kb,
    )


async def task_referral(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    uid = query.from_user.id
    link = f"https://t.me/{context.bot.username}?start={uid}"
    await edit_section(
        query,
        caption=(
            f"ü§ù –ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –¥—Ä—É–≥–∞, –æ—Ç–ø—Ä–∞–≤–∏–≤ –µ–º—É —ç—Ç—É —Å—Å—ã–ª–∫—É:\n{link}\n"
            f"–ó–∞ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω–æ–≥–æ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ {format_num(500)}ü™ô."
        ),
        image_key="coins",
        reply_markup=InlineKeyboardMarkup(
            [[InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="get_coins")]]
        ),
    )


async def task_click(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–ö–ª–∏–∫ ‚Äì –Ω–µ–±–æ–ª—å—à–∞—è –Ω–∞–≥—Ä–∞–¥–∞."""
    uid = query.from_user.id
    user = get_user(uid)
    reward = random.randint(1, 5)
    update_user(
        uid,
        coins=user["coins"] + reward,
        weekly_coins=user["weekly_coins"] + reward,
        reputation=user["reputation"] + 1,
        click_reward_last=int(time.time()),
    )
    log_user_action(uid, f"–ö–ª–∏–∫–Ω—É–ª –∏ –ø–æ–ª—É—á–∏–ª {reward}ü™ô")
    await edit_section(
        query,
        caption=f"‚ú® –í—ã –ø–æ–ª—É—á–∏–ª–∏ {format_num(reward)}ü™ô!",
        image_key="coins",
        reply_markup=InlineKeyboardMarkup(
            [[InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="get_coins")]]
        ),
    )


# ----------------------------------------------------------------------
#   –ö–∞–∑–∏–Ω–æ
# ----------------------------------------------------------------------
async def casino_info(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    await edit_section(
        query,
        caption=(
            "üé∞ –ß—Ç–æ–±—ã —Å—ã–≥—Ä–∞—Ç—å –≤ –º–∏–Ω–∏‚Äë–∫–∞–∑–∏–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:\n"
            "/—Å—Ç–∞–≤–∫–∞ <—Å—É–º–º–∞> ‚Äì –º–∏–Ω–∏–º—É–º 100ü™ô.\n"
            "–ü—Ä–∏–º–µ—Ä: /—Å—Ç–∞–≤–∫–∞ 5000"
        ),
        image_key="casino",
    )


# ----------------------------------------------------------------------
#   –ú–∞–≥–∞–∑–∏–Ω (–ø–∏—Ç–æ–º—Ü—ã + –∫–æ—Ä–º)
# ----------------------------------------------------------------------
async def render_shop(query, context: ContextTypes.DEFAULT_TYPE, page: int = 0) -> None:
    items, total_pages = paginate_items(ANIMAL_CONFIG, page)
    btns = [
        InlineKeyboardButton(
            f"üçé –ö–æ—Ä–º ({format_num(FOOD_PRICE)}ü™ô)", callback_data="buy_feed"
        )
    ]
    cur.execute("SELECT autumn_event_active FROM global_settings WHERE id = 1")
    if cur.fetchone()["autumn_event_active"]:
        btns.append(
            InlineKeyboardButton(
                f"üçÇ –û—Å–µ–Ω–Ω–∏–π –∫–æ—Ä–º ({format_num(AUTUMN_FOOD_PRICE)}ü™ô)",
                callback_data="buy_autumn_feed",
            )
        )
    for field, _, emoji, name, _, price, _ in items:
        btns.append(
            InlineKeyboardButton(
                f"{emoji} {name} ({format_num(price)}ü™ô)", callback_data=f"show_{field}"
            )
        )
    nav = []
    if page > 0:
        nav.append(InlineKeyboardButton("‚è™ –ü—Ä–µ–¥.", callback_data="shop_prev"))
    if page < total_pages - 1:
        nav.append(InlineKeyboardButton("–°–ª–µ–¥. ‚è©", callback_data="shop_next"))
    nav.append(InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="back"))
    kb = chunk_buttons(btns, per_row=2) + [nav]
    await edit_section(
        query,
        caption=f"üõí –ú–∞–≥–∞–∑–∏–Ω ‚Äì —Å—Ç—Ä–∞–Ω–∏—Ü–∞ {page + 1}/{total_pages}",
        image_key="shop",
        reply_markup=InlineKeyboardMarkup(kb),
    )
    context.user_data["shop_page"] = page


async def shop_navigation(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    data = query.data
    cur_page = context.user_data.get("shop_page", 0)
    if data == "shop_next":
        await render_shop(query, context, page=cur_page + 1)
    elif data == "shop_prev":
        await render_shop(query, context, page=max(0, cur_page - 1))


# ----------------------------------------------------------------------
#   –ü–æ–∫–∞–∑ –ø–∏—Ç–æ–º—Ü–∞ –∏ –ø–æ–∫—É–ø–∫–∞
# ----------------------------------------------------------------------
async def show_animal(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    field = query.data.split("_", 1)[1]
    rec = next((r for r in ANIMAL_CONFIG if r[0] == field), None)
    if not rec:
        await query.edit_message_caption(caption="‚ùå –ü–∏—Ç–æ–º–µ—Ü –Ω–µ –Ω–∞–π–¥–µ–Ω.")
        return
    _, inc, emoji, name, _, price, desc = rec
    user = get_user(query.from_user.id)
    total_pets = sum(user[f] for f, *_ in ANIMAL_CONFIG)
    limit_reached = total_pets >= user["pet_limit"]
    txt = (
        f"{emoji} {name}\n"
        f"–î–æ—Ö–æ–¥: {inc}ü™ô/–º–∏–Ω\n"
        f"–¶–µ–Ω–∞: {format_num(price)}ü™ô\n"
        f"{desc}"
    )
    if limit_reached:
        txt += f"\n‚ö†Ô∏è –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ –ª–∏–º–∏—Ç–∞ –ø–∏—Ç–æ–º—Ü–µ–≤ ({user['pet_limit']}).\n"
        txt += "–°–Ω–∞—á–∞–ª–∞ —É–ª—É—á—à–∏—Ç–µ –±–∞–∑—É –∏–ª–∏ –ø—Ä–æ–¥–∞–π—Ç–µ —á–∞—Å—Ç—å –∂–∏–≤–æ—Ç–Ω—ã—Ö."
        btn = InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="shop")
        kb = InlineKeyboardMarkup([[btn]])
        await edit_section(query, caption=txt, image_key="shop", reply_markup=kb)
        return
    # –ö–Ω–æ–ø–∫–∞ ¬´–ö—É–ø–∏—Ç—å¬ª ‚Üí –ø–æ–∫–∞–∂–µ—Ç –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
    btn = InlineKeyboardButton("üõí –ö—É–ø–∏—Ç—å", callback_data=f"buy_qty_{field}")
    kb = InlineKeyboardMarkup([[btn]])
    await edit_section(query, caption=txt, image_key="shop", reply_markup=kb)


async def buy_quantity(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    field = query.data.split("_", 2)[2]
    rec = next((r for r in ANIMAL_CONFIG if r[0] == field), None)
    if not rec:
        await query.edit_message_caption(caption="‚ùå –ü–∏—Ç–æ–º–µ—Ü –Ω–µ –Ω–∞–π–¥–µ–Ω.")
        return
    _, _, _, _, _, price, _ = rec
    btns = [
        InlineKeyboardButton("1", callback_data=f"buy_confirm_{field}_1"),
        InlineKeyboardButton("5", callback_data=f"buy_confirm_{field}_5"),
        InlineKeyboardButton("10", callback_data=f"buy_confirm_{field}_10"),
        InlineKeyboardButton("üÖ∞Ô∏è –í—Å—ë", callback_data=f"buy_confirm_{field}_all"),
    ]
    kb = InlineKeyboardMarkup([btns])
    await edit_section(
        query,
        caption=f"–°–∫–æ–ª—å–∫–æ {field} –∫—É–ø–∏—Ç—å? (—Ü–µ–Ω–∞ –∑–∞ 1 —à—Ç: {format_num(price)}ü™ô)",
        image_key="shop",
        reply_markup=kb,
    )


async def buy_confirm(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–∫—É–ø–∫–∏."""
    parts = query.data.split("_")
    if len(parts) < 4:
        await query.edit_message_caption(caption="‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç.")
        return
    qty_raw = parts[-1]
    field = "_".join(parts[2:-1])   # –≤—Å—ë –º–µ–∂–¥—É 2‚Äë–º –∏ –ø—Ä–µ–¥–ø–æ—Å–ª–µ–¥–Ω–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º
    rec = next((r for r in ANIMAL_CONFIG if r[0] == field), None)
    if not rec:
        await query.edit_message_caption(caption="‚ùå –ü–∏—Ç–æ–º–µ—Ü –Ω–µ –Ω–∞–π–¥–µ–Ω.")
        return
    _, _, _, _, _, price, _ = rec
    uid = query.from_user.id
    user = get_user(uid)
    # –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞
    total_pets = sum(user[f] for f, *_ in ANIMAL_CONFIG)
    free_slots = user["pet_limit"] - total_pets
    if free_slots <= 0:
        await edit_section(
            query,
            caption=f"‚ö†Ô∏è –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ –ª–∏–º–∏—Ç–∞ ({user['pet_limit']}) –∏ –Ω–µ –º–æ–∂–µ—Ç–µ –∫—É–ø–∏—Ç—å –±–æ–ª—å—à–µ.",
            image_key="shop",
        )
        return
    qty = user["coins"] // price if qty_raw == "all" else int(qty_raw)
    qty = min(qty, free_slots)
    total_price = price * qty
    if qty <= 0:
        await edit_section(query, caption="‚ùå –ù–µ—á–µ–≥–æ –ø–æ–∫—É–ø–∞—Ç—å.", image_key="shop")
        return
    if user["coins"] < total_price:
        await edit_section(
            query,
            caption=f"‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç. –ù—É–∂–Ω–æ {format_num(total_price)}ü™ô.",
            image_key="shop",
        )
        return
    upd: Dict[str, Any] = {
        "coins": user["coins"] - total_price,
        "weekly_coins": user["weekly_coins"] + total_price,
        "reputation": user["reputation"] + 1,
    }
    upd[field] = user[field] + qty
    update_user(uid, **upd)
    set_pet_last_fed(uid, field, int(time.time()))
    log_user_action(uid, f"–ö—É–ø–∏–ª {qty} —à—Ç. {field} –∑–∞ {total_price}ü™ô")
    await edit_section(
        query,
        caption=(
            f"üü¢ –ü—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–æ {qty} —à—Ç. {field}. –ü–æ—Ç—Ä–∞—á–µ–Ω–æ {format_num(total_price)}ü™ô."
        ),
        image_key="shop",
        reply_markup=InlineKeyboardMarkup(
            [[InlineKeyboardButton("‚¨ÖÔ∏è –í –º–∞–≥–∞–∑–∏–Ω", callback_data="shop")]]
        ),
    )


# ----------------------------------------------------------------------
#   –ö–æ—Ä–º (–æ–±—ã—á–Ω—ã–π –∏ –æ—Å–µ–Ω–Ω–∏–π)
# ----------------------------------------------------------------------
async def buy_feed(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    uid = query.from_user.id
    user = get_user(uid)
    if user["coins"] < FOOD_PRICE:
        await edit_section(
            query,
            caption=f"‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç. –ù—É–∂–Ω–æ {format_num(FOOD_PRICE)}ü™ô.",
            image_key="shop",
        )
        return
    update_user(
        uid,
        coins=user["coins"] - FOOD_PRICE,
        feed=user["feed"] + 1,
        weekly_coins=user["weekly_coins"] + FOOD_PRICE,
        reputation=user["reputation"] + 1,
    )
    log_user_action(uid, "+1 –æ–±—ã—á–Ω—ã–π –∫–æ—Ä–º")
    await edit_section(
        query,
        caption=f"‚úÖ +1 –æ–±—ã—á–Ω—ã–π –∫–æ—Ä–º –∑–∞ {format_num(FOOD_PRICE)}ü™ô.",
        image_key="shop",
        reply_markup=InlineKeyboardMarkup(
            [[InlineKeyboardButton("‚¨ÖÔ∏è –í –º–∞–≥–∞–∑–∏–Ω", callback_data="shop")]]
        ),
    )


async def buy_autumn_feed(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    uid = query.from_user.id
    user = get_user(uid)
    if user["coins"] < AUTUMN_FOOD_PRICE:
        await edit_section(
            query,
            caption=f"‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç. –ù—É–∂–Ω–æ {format_num(AUTUMN_FOOD_PRICE)}ü™ô.",
            image_key="shop",
        )
        return
    update_user(
        uid,
        coins=user["coins"] - AUTUMN_FOOD_PRICE,
        autumn_feed=user["autumn_feed"] + 1,
        weekly_coins=user["weekly_coins"] + AUTUMN_FOOD_PRICE,
        reputation=user["reputation"] + 1,
    )
    log_user_action(uid, "+1 –æ—Å–µ–Ω–Ω–∏–π –∫–æ—Ä–º")
    await edit_section(
        query,
        caption=f"‚úÖ +1 –æ—Å–µ–Ω–Ω–∏–π –∫–æ—Ä–º –∑–∞ {format_num(AUTUMN_FOOD_PRICE)}ü™ô.",
        image_key="shop",
        reply_markup=InlineKeyboardMarkup(
            [[InlineKeyboardButton("‚¨ÖÔ∏è –í –º–∞–≥–∞–∑–∏–Ω", callback_data="shop")]]
        ),
    )


# ----------------------------------------------------------------------
#   –û—Å–µ–Ω–Ω–µ–µ —Å–æ–±—ã—Ç–∏–µ (–∏–Ω—Ñ–æ + –∞–¥–º–∏–Ω‚Äë–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å)
# ----------------------------------------------------------------------
async def autumn_event_info(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    cur.execute("SELECT autumn_event_active FROM global_settings WHERE id = 1")
    active = cur.fetchone()["autumn_event_active"]
    status = "‚úÖ –í–∫–ª—é—á–µ–Ω–æ" if active else "‚ùå –í—ã–∫–ª—é—á–µ–Ω–æ"
    text = (
        f"{status}\n\n"
        "üçÇ –û—Å–µ–Ω–Ω–µ–µ —Å–æ–±—ã—Ç–∏–µ ‚Äì –≤—Ä–µ–º–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å:\n"
        f"‚Ä¢ –ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ –æ—Å–µ–Ω–Ω–µ–≥–æ –∫–æ—Ä–º–∞ (–≤ –º–∞–≥–∞–∑–∏–Ω–µ) –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –¥–≤–æ–π–Ω–æ–π –¥–æ—Ö–æ–¥\n"
        f"  –Ω–∞ 1‚ÄØ—á.\n"
        f"‚Ä¢ –°—Ç–æ–∏–º–æ—Å—Ç—å –æ—Å–µ–Ω–Ω–µ–≥–æ –∫–æ—Ä–º–∞ ‚Äì {format_num(AUTUMN_FOOD_PRICE)}ü™ô.\n"
        "‚Ä¢ –ë–æ–Ω—É—Å –∞–∫—Ç–∏–≤–µ–Ω —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞ —Å–æ–±—ã—Ç–∏–µ –≤–∫–ª—é—á–µ–Ω–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º."
    )
    await edit_section(
        query,
        caption=text,
        image_key="autumn",
        reply_markup=InlineKeyboardMarkup(
            [[InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="back")]]
        ),
    )


async def toggle_autumn_event(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    if not is_admin(query.from_user.id):
        await edit_section(query, caption="‚ùå –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω.", image_key="autumn")
        return
    cur.execute("SELECT autumn_event_active FROM global_settings WHERE id = 1")
    current = cur.fetchone()["autumn_event_active"]
    new_val = 0 if current else 1
    _execute(
        "UPDATE global_settings SET autumn_event_active = ? WHERE id = 1",
        (new_val,),
    )
    # –£–≤–µ–¥–æ–º–ª—è–µ–º –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤
    txt = f"üçÇ –û—Å–µ–Ω–Ω–µ–µ —Å–æ–±—ã—Ç–∏–µ {'–≤–∫–ª—é—á–µ–Ω–æ' if new_val else '–≤—ã–∫–ª—é—á–µ–Ω–æ'}."
    cur.execute("SELECT user_id FROM users")
    for (uid,) in cur.fetchall():
        try:
            context.bot.send_message(uid, txt)
        except Exception:
            pass
    await edit_section(
        query,
        caption=f"üçÇ –û—Å–µ–Ω–Ω–µ–µ —Å–æ–±—ã—Ç–∏–µ {('–≤–∫–ª—é—á–µ–Ω–æ' if new_val else '–≤—ã–∫–ª—é—á–µ–Ω–æ')}.",
        image_key="autumn",
        reply_markup=InlineKeyboardMarkup(
            [[InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="admin")]]
        ),
    )


# ----------------------------------------------------------------------
#   –ü—Ä–æ–º–æ–∫–æ–¥—ã
# ----------------------------------------------------------------------
def add_promo(
    code: str, coins: int, pet_field: str | None, pet_qty: int, max_uses: int
) -> None:
    """–°–æ–∑–¥–∞—ë—Ç –ø—Ä–æ–º–æ–∫–æ–¥ (–º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è max_uses —Ä–∞–∑)."""
    _execute(
        """
        INSERT OR REPLACE INTO promo_codes
        (code, coins, pet_field, pet_qty, max_uses, used)
        VALUES (?,?,?,?,?,0)
        """,
        (code, coins, pet_field, pet_qty, max_uses),
    )


def get_promo(code: str) -> sqlite3.Row | None:
    cur.execute("SELECT * FROM promo_codes WHERE code = ?", (code,))
    return cur.fetchone()


def delete_promo(code: str) -> None:
    _execute("DELETE FROM promo_codes WHERE code = ?", (code,))


async def promo_menu(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∫–Ω–æ–ø–∫—É –≤–≤–æ–¥–∞ –∫–æ–¥–∞."""
    await edit_section(
        query,
        caption="üéüÔ∏è –í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ (–æ–¥–Ω–æ —Å–ª–æ–≤–æ).",
        image_key="promo",
        reply_markup=InlineKeyboardMarkup(
            [[InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="back")]]
        ),
    )
    context.user_data["awaiting_promo_input"] = True


async def handle_promo_input(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–≤–æ–¥ –∫–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º."""
    code = update.message.text.strip().upper()
    promo = get_promo(code)
    if not promo:
        await update.message.reply_text("‚ùå –ü—Ä–æ–º–æ–∫–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –∏—Å—á–µ—Ä–ø–∞–Ω.")
        context.user_data["awaiting_promo_input"] = False
        return
    if promo["used"] >= promo["max_uses"]:
        await update.message.reply_text("‚ùå –ü—Ä–æ–º–æ–∫–æ–¥ —É–∂–µ –∏—Å—á–µ—Ä–ø–∞–Ω.")
        context.user_data["awaiting_promo_input"] = False
        return
    uid = update.effective_user.id
    user = get_user(uid)
    # –î–æ–±–∞–≤–ª—è–µ–º –º–æ–Ω–µ—Ç—ã
    new_coins = min(user["coins"] + promo["coins"], MAX_INT)
    update_user(uid, coins=new_coins, weekly_coins=user["weekly_coins"] + promo["coins"])
    # –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω –ø–∏—Ç–æ–º–µ—Ü ‚Äì –¥–æ–±–∞–≤–ª—è–µ–º
    if promo["pet_field"]:
        cur.execute(f"SELECT {promo['pet_field']} FROM users WHERE user_id = ?", (uid,))
        cur_row = cur.fetchone()
        cur_val = cur_row[promo["pet_field"]]
        update_user(uid, **{promo["pet_field"]: cur_val + promo["pet_qty"]})
        set_pet_last_fed(uid, promo["pet_field"], int(time.time()))
    # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π
    _execute(
        "UPDATE promo_codes SET used = used + 1 WHERE code = ?",
        (code,),
    )
    log_user_action(uid, f"–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª –ø—Ä–æ–º–æ–∫–æ–¥ {code}")
    await update.message.reply_text(
        f"‚úÖ –ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–Ω—è—Ç! –í—ã –ø–æ–ª—É—á–∏–ª–∏ {format_num(promo['coins'])}ü™ô"
        + (f" –∏ {promo['pet_qty']} —à—Ç. `{promo['pet_field']}`." if promo["pet_field"] else ".")
    )
    context.user_data["awaiting_promo_input"] = False


# ----------------------------------------------------------------------
#   –ú–∞–≥–∞–∑–∏–Ω —Ñ–µ—Ä–º–µ—Ä–æ–≤ (–ø—Ä–æ—Å–º–æ—Ç—Ä ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–∫—É–ø–∫–∏)
# ----------------------------------------------------------------------
async def farmers_shop(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ñ–µ—Ä–º–µ—Ä–æ–≤ –±–µ–∑ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π –ø–æ–∫—É–ø–∫–∏."""
    btns = []
    for farmer_type, price, inc, desc in FARMER_CONFIG:
        btns.append(
            InlineKeyboardButton(
                f"{farmer_type} ({format_num(price)}ü™ô)", callback_data=f"farmer_show_{farmer_type}"
            )
        )
    btns.append(InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="back"))
    kb = InlineKeyboardMarkup(chunk_buttons(btns, per_row=1))
    await edit_section(
        query,
        caption="üë®‚Äçüåæ –ú–∞–≥–∞–∑–∏–Ω —Ñ–µ—Ä–º–µ—Ä–æ–≤ ‚Äì –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–µ—Ä–º–µ—Ä–∞, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –¥–µ—Ç–∞–ª–∏.",
        image_key="farmers",
        reply_markup=kb,
    )


async def farmer_show_detail(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–ü–æ–∫–∞–∑ —Ñ–æ—Ç–æ, –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –∫–Ω–æ–ø–∫—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–∫—É–ø–∫–∏."""
    farmer_name = query.data.split("_", 2)[2]          # farmer_show_<name>
    rec = get_farmer(farmer_name)
    if not rec:
        await query.edit_message_caption(caption="‚ùå –§–µ—Ä–º–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.")
        return
    _, price, inc, desc = rec
    photo_url = FARMER_IMAGES.get(farmer_name)
    text = (
        f"üë®‚Äçüåæ {farmer_name}\n"
        f"üí∏ –¶–µ–Ω–∞: {format_num(price)}ü™ô\n"
        f"üìà –î–æ—Ö–æ–¥: +{format_num(inc)}ü™ô/–º–∏–Ω\n"
        f"üìù {desc}"
    )
    # –ö–Ω–æ–ø–∫–∞ ¬´–ö—É–ø–∏—Ç—å¬ª ‚Üí callback_data="farmer_buy_<name>"
    buy_btn = InlineKeyboardButton("‚úÖ –ö—É–ø–∏—Ç—å", callback_data=f"farmer_buy_{farmer_name}")
    back_btn = InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="farmers_shop")
    kb = InlineKeyboardMarkup([[buy_btn], [back_btn]])
    if photo_url:
        await query.edit_message_media(
            media=InputMediaPhoto(media=photo_url, caption=text),
            reply_markup=kb,
        )
    else:
        await edit_section(query, caption=text, image_key="farmers", reply_markup=kb)


async def farmer_buy_confirm(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–∫—É–ø–∫–∞ —Ñ–µ—Ä–º–µ—Ä–∞ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è."""
    farmer_name = query.data.split("_", 2)[2]          # farmer_buy_<name>
    rec = get_farmer(farmer_name)
    if not rec:
        await query.edit_message_caption(caption="‚ùå –§–µ—Ä–º–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.")
        return
    _, price, inc, _ = rec
    uid = query.from_user.id
    user = get_user(uid)
    if user["coins"] < price:
        await edit_section(
            query,
            caption=f"‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç. –ù—É–∂–Ω–æ {format_num(price)}ü™ô.",
            image_key="farmers",
        )
        return
    # –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–±–ª–∏—Ü—É farmers
    cur.execute(
        "SELECT qty FROM farmers WHERE user_id = ? AND farmer_type = ?",
        (uid, farmer_name),
    )
    row = cur.fetchone()
    if row:
        new_qty = row["qty"] + 1
        _execute(
            "UPDATE farmers SET qty = ? WHERE user_id = ? AND farmer_type = ?",
            (new_qty, uid, farmer_name),
        )
    else:
        _execute(
            "INSERT INTO farmers (user_id, farmer_type, qty) VALUES (?,?,1)",
            (uid, farmer_name),
        )
    update_user(uid, coins=user["coins"] - price)
    log_user_action(uid, f"–ö—É–ø–∏–ª —Ñ–µ—Ä–º–µ—Ä–∞ {farmer_name} –∑–∞ {price}ü™ô")
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–æ—Ç–æ, –µ—Å–ª–∏ –µ—Å—Ç—å
    photo_url = FARMER_IMAGES.get(farmer_name)
    if photo_url:
        await context.bot.send_photo(
            uid,
            photo=photo_url,
            caption=(
                f"‚úÖ –í—ã –∫—É–ø–∏–ª–∏ —Ñ–µ—Ä–º–µ—Ä–∞ ¬´{farmer_name}¬ª!\n"
                f"üí∏ –°—Ç–æ–∏–º–æ—Å—Ç—å: {format_num(price)}ü™ô\n"
                f"üìà –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –¥–æ—Ö–æ–¥: +{format_num(inc)}ü™ô/–º–∏–Ω."
            ),
        )
    else:
        await query.edit_message_caption(
            caption=(
                f"‚úÖ –í—ã –∫—É–ø–∏–ª–∏ —Ñ–µ—Ä–º–µ—Ä–∞ ¬´{farmer_name}¬ª!\n"
                f"üí∏ –°—Ç–æ–∏–º–æ—Å—Ç—å: {format_num(price)}ü™ô\n"
                f"üìà –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –¥–æ—Ö–æ–¥: +{format_num(inc)}ü™ô/–º–∏–Ω."
            ),
        )
    await query.edit_message_reply_markup(
        reply_markup=InlineKeyboardMarkup(
            [[InlineKeyboardButton("‚¨ÖÔ∏è –í –º–∞–≥–∞–∑–∏–Ω —Ñ–µ—Ä–º–µ—Ä–æ–≤", callback_data="farmers_shop")]]
        )
    )


# ----------------------------------------------------------------------
#   –ê–¥–º–∏–Ω‚Äë–ø–∞–Ω–µ–ª—å
# ----------------------------------------------------------------------
async def admin_panel(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    if not is_admin(query.from_user.id):
        await edit_section(query, caption="‚ùå –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω.", image_key="admin")
        return
    btns = [
        InlineKeyboardButton("üîÑ –°–±—Ä–æ—Å —Ç–æ–ø–∞", callback_data="admin_reset_top"),
        InlineKeyboardButton("üîÅ –°–±—Ä–æ—Å –≤—Å–µ—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤", callback_data="admin_reset_all"),
        InlineKeyboardButton("üì¢ –†–∞—Å—Å—ã–ª–∫–∞", callback_data="admin_broadcast"),
        InlineKeyboardButton("üï∑Ô∏è –í—ã–¥–∞—Ç—å –ø–∞—É–∫–∞‚Äë—Å–µ–∫—Ä–µ—Ç–∞", callback_data="admin_give_spider"),
        InlineKeyboardButton("üí∞ –í—ã–¥–∞—Ç—å –º–æ–Ω–µ—Ç—ã", callback_data="admin_set_coins"),
        InlineKeyboardButton("‚ûï –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–µ—Ç—ã", callback_data="admin_add_coins"),
        InlineKeyboardButton("üßπ –û–±–Ω—É–ª–∏—Ç—å X‚Äë—Ñ–µ—Ä–º—É", callback_data="admin_reset_xfarm"),
        InlineKeyboardButton("üìú –ñ—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π", callback_data="admin_view_logs"),
        InlineKeyboardButton("üéüÔ∏è –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥", callback_data="admin_create_promo"),
        InlineKeyboardButton("üçÇ –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –æ—Å–µ–Ω–Ω–µ–µ —Å–æ–±—ã—Ç–∏–µ", callback_data="admin_toggle_autumn"),
        InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="back"),
    ]
    kb = chunk_buttons(btns, per_row=2)
    await edit_section(
        query,
        caption="üî• –ê–¥–º–∏–Ω‚Äë–ø–∞–Ω–µ–ª—å üî•",
        image_key="admin",
        reply_markup=InlineKeyboardMarkup(kb),
    )


async def admin_actions(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∫–Ω–æ–ø–∫–∏, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å ¬´admin_¬ª. """
    data = query.data
    uid = query.from_user.id
    if not is_admin(uid):
        await edit_section(query, caption="‚ùå –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω.", image_key="admin")
        return
    if data == "admin_reset_top":
        _execute(
            "UPDATE users SET weekly_coins = 0, last_reset = ?, secret_spider = 0",
            (int(time.time()),),
        )
        await edit_section(query, caption="‚úÖ –¢–æ–ø —Å–±—Ä–æ—à–µ–Ω.", image_key="admin")
        return
    if data == "admin_reset_all":
        _execute("DELETE FROM users")
        _execute("DELETE FROM pet_last_fed")
        _execute("DELETE FROM decorations")
        _execute("DELETE FROM lottery")
        _execute("DELETE FROM boosters")
        _execute("DELETE FROM promo_codes")
        _execute("DELETE FROM farmers")
        await edit_section(query, caption="‚úÖ –í—Å–µ –∞–∫–∫–∞—É–Ω—Ç—ã —É–¥–∞–ª–µ–Ω—ã.", image_key="admin")
        return
    if data == "admin_broadcast":
        context.user_data["awaiting_broadcast"] = True
        await edit_section(
            query,
            caption="‚úâÔ∏è –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Ä–∞—Å—Å—ã–ª–∫–∏ (–±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º).",
            image_key="admin",
            reply_markup=InlineKeyboardMarkup(
                [[InlineKeyboardButton("‚¨ÖÔ∏è –û—Ç–º–µ–Ω–∞", callback_data="back")]]
            ),
        )
        return
    if data == "admin_give_spider":
        update_user(uid, secret_spider=1)
        await edit_section(query, caption="‚úÖ –í—ã –ø–æ–ª—É—á–∏–ª–∏ –ø–∞—É–∫–∞‚Äë—Å–µ–∫—Ä–µ—Ç–∞.", image_key="admin")
        return
    if data == "admin_set_coins":
        context.user_data["awaiting_set_coins"] = True
        await edit_section(
            query,
            caption=(
                "üí∞ –í–≤–µ–¥–∏—Ç–µ user_id amount, –ø—Ä–∏–º–µ—Ä:\n"
                "123456 5000000"
            ),
            image_key="admin",
            reply_markup=InlineKeyboardMarkup(
                [[InlineKeyboardButton("‚¨ÖÔ∏è –û—Ç–º–µ–Ω–∞", callback_data="back")]]
            ),
        )
        return
    if data == "admin_add_coins":
        context.user_data["awaiting_add_coins"] = True
        await edit_section(
            query,
            caption=(
                "‚ûï –í–≤–µ–¥–∏—Ç–µ user_id amount, –º–æ–Ω–µ—Ç—ã –±—É–¥—É—Ç –ø—Ä–∏–±–∞–≤–ª–µ–Ω—ã."
            ),
            image_key="admin",
            reply_markup=InlineKeyboardMarkup(
                [[InlineKeyboardButton("‚¨ÖÔ∏è –û—Ç–º–µ–Ω–∞", callback_data="back")]]
            ),
        )
        return
    if data == "admin_reset_xfarm":
        # X‚Äë—Ñ–µ—Ä–º–∞ —É–∂–µ —É–¥–∞–ª–µ–Ω–∞ –∏–∑ —Å—Ö–µ–º—ã, –Ω–æ –æ—Å—Ç–∞–≤–∏–º –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.
        await edit_section(query, caption="‚úÖ X‚Äë—Ñ–µ—Ä–º–∞ —É–∂–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.", image_key="admin")
        return
    if data == "admin_view_logs":
        cur.execute(
            "SELECT user_id, action, ts FROM admin_logs ORDER BY ts DESC LIMIT 20"
        )
        rows = cur.fetchall()
        if not rows:
            txt = "üìú –ñ—É—Ä–Ω–∞–ª –ø—É—Å—Ç."
        else:
            txt = "üìú –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –∏–≥—Ä–æ–∫–æ–≤:\n"
            for row in rows:
                t = time.strftime("%d.%m %H:%M", time.localtime(row["ts"]))
                txt += f"[{t}] ID {row['user_id']}: {row['action']}\n"
        await edit_section(
            query,
            caption=txt,
            image_key="logs",
            reply_markup=InlineKeyboardMarkup(
                [[InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="admin")]]
            ),
        )
        return
    if data == "admin_create_promo":
        context.user_data["awaiting_create_promo"] = True
        await edit_section(
            query,
            caption=(
                "üìù –í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:\n"
                "CODE COINS [PET_FIELD PET_QTY] MAX_USES\n"
                "–ü—Ä–∏–º–µ—Ä –±–µ–∑ –ø–∏—Ç–æ–º—Ü–∞: WELCOME 500 5\n"
                "–ü—Ä–∏–º–µ—Ä —Å –ø–∏—Ç–æ–º—Ü–µ–º: DRAGON1 1000 dragon 1 3"
            ),
            image_key="promo",
            reply_markup=InlineKeyboardMarkup(
                [[InlineKeyboardButton("‚¨ÖÔ∏è –û—Ç–º–µ–Ω–∞", callback_data="back")]]
            ),
        )
        return
    if data == "admin_toggle_autumn":
        await toggle_autumn_event(query, context)
        return
    await edit_section(query, caption="‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞.", image_key="admin")


# ----------------------------------------------------------------------
#   –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
# ----------------------------------------------------------------------
async def button(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    query = update.callback_query
    try:
        await query.answer()
    except Exception:
        pass
    data = query.data
    # ------------------- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è ¬´–ù–∞–∑–∞–¥¬ª -------------------
    if data == "back":
        await show_main_menu(update, context, edit=True)
        return
    # ------------------- –û –±–æ—Ç–µ -------------------
    if data == "about":
        await about_section(query)
        return
    # ------------------- –ú–æ—è —Ñ–µ—Ä–º–∞ -------------------
    if data == "farm":
        await farm_section(query, context)
        return
    # ------------------- –ö–æ—Ä–º–ª–µ–Ω–∏–µ -------------------
    if data == "feed_animal":
        await feed_animal_step(query, context)
        return
    if data.startswith("feed_type_"):
        await feed_type_chosen(query, context)
        return
    if data.startswith("feed_"):
        await feed_animal(query, context)
        return
    # ------------------- –ü—Ä–æ–¥–∞–∂–∞ -------------------
    if data == "sell_animal":
        await sell_animal_step(query, context)
        return
    if data.startswith("sell_") and not data.startswith("sell_qty_"):
        await sell_animal_quantity(query, context)
        return
    if data.startswith("sell_qty_"):
        await sell_animal_confirm(query, context)
        return
    # ------------------- –£–ª—É—á—à–∏—Ç—å –±–∞–∑—É -------------------
    if data == "upgrade_base":
        await upgrade_base(query, context)
        return
    # ------------------- –¢–æ–ø —Ñ–µ—Ä–º–µ—Ä–æ–≤ -------------------
    if data == "top":
        await top_farmers(query, context)
        return
    # ------------------- –°—Ç–∞—Ç—É—Å -------------------
    if data == "status":
        await status_section(query, context)
        return
    # ------------------- –ü–æ–ª—É—á–∏—Ç—å –º–æ–Ω–µ—Ç—ã -------------------
    if data == "get_coins":
        await get_coins_menu(query, context)
        return
    if data == "task_referral":
        await task_referral(query, context)
        return
    if data == "task_click":
        await task_click(query, context)
        return
    # ------------------- –ö–∞–∑–∏–Ω–æ -------------------
    if data == "casino_info":
        await casino_info(query, context)
        return
    # ------------------- –ú–∞–≥–∞–∑–∏–Ω -------------------
    if data == "shop":
        await render_shop(query, context, page=0)
        return
    if data in ("shop_next", "shop_prev"):
        await shop_navigation(query, context)
        return
    if data.startswith("show_"):
        await show_animal(query, context)
        return
    if data.startswith("buy_qty_"):
        await buy_quantity(query, context)
        return
    if data.startswith("buy_confirm_"):
        await buy_confirm(query, context)
        return
    if data == "buy_feed":
        await buy_feed(query, context)
        return
    if data == "buy_autumn_feed":
        await buy_autumn_feed(query, context)
        return
    # ------------------- –§–µ—Ä–º–µ—Ä—ã -------------------
    if data == "farmers_shop":
        await farmers_shop(query, context)
        return
    if data.startswith("farmer_show_"):
        await farmer_show_detail(query, context)
        return
    if data.startswith("farmer_buy_"):
        await farmer_buy_confirm(query, context)
        return
    # ------------------- –û—Å–µ–Ω–Ω–µ–µ —Å–æ–±—ã—Ç–∏–µ -------------------
    if data == "autumn_event":
        await autumn_event_info(query, context)
        return
    if data == "admin_toggle_autumn":
        await toggle_autumn_event(query, context)
        return
    # ------------------- –ü—Ä–æ–º–æ–∫–æ–¥—ã -------------------
    if data == "promo":
        await promo_menu(query, context)
        return
    # ------------------- –ê–¥–º–∏–Ω‚Äë–ø–∞–Ω–µ–ª—å -------------------
    if data == "admin":
        await admin_panel(query, context)
        return
    if data.startswith("admin_"):
        await admin_actions(query, context)
        return
    # ------------------- –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ -------------------
    await query.edit_message_caption(caption="‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞.")


# ----------------------------------------------------------------------
#   /start (—Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä)
# ----------------------------------------------------------------------
async def start_command(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç /start, –≤–∫–ª—é—á–∞—è —Ä–µ—Ñ–µ—Ä–∞–ª."""
    txt = update.message.text if update.message else ""
    user = update.effective_user
    db_user = get_user(user.id)
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –Ω–∞—Å—Ç—É–ø–∏–ª –ª–∏ –Ω–æ–≤—ã–π —Å–µ–∑–æ–Ω
    check_and_reset_season()
    # –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä: /start <ref_id>
    if txt.startswith("/start"):
        parts = txt.split()
        if len(parts) == 2 and parts[1].isdigit():
            ref_id = int(parts[1])
            if db_user["referred_by"] == 0 and ref_id != user.id:
                update_user(user.id, referred_by=ref_id)
                # –Ω–∞–≥—Ä–∞–¥–∞ —Ä–µ—Ñ–µ—Ä–µ—Ä—É
                ref_user = get_user(ref_id)
                update_user(
                    ref_id,
                    coins=ref_user["coins"] + 500,
                    weekly_coins=ref_user["weekly_coins"] + 500,
                    reputation=ref_user["reputation"] + 1,
                )
                try:
                    await context.bot.send_message(
                        ref_id,
                        f"ü§ù –í—ã –ø–æ–ª—É—á–∏–ª–∏ {format_num(500)}ü™ô –∑–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞!",
                    )
                except Exception:
                    pass
    await show_main_menu(update, context, edit=False)


# ----------------------------------------------------------------------
#   –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (—Ä–∞–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã)
# ----------------------------------------------------------------------
async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–µ —è–≤–ª—è—é—â–∏–µ—Å—è –∫–æ–º–∞–Ω–¥–∞–º–∏."""
    user = update.effective_user
    txt = update.message.text if update.message else ""

    # ------------------- –†–∞—Å—Å—ã–ª–∫–∞ (–∞–¥–º–∏–Ω) -------------------
    if context.user_data.get("awaiting_broadcast"):
        for row in cur.execute("SELECT user_id FROM users"):
            try:
                await context.bot.send_message(row["user_id"], txt)
            except Exception:
                pass
        context.user_data["awaiting_broadcast"] = False
        await update.message.reply_text("‚úÖ –†–∞—Å—Å—ã–ª–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞.")
        return

    # ------------------- –í—ã–¥–∞—á–∞ –º–æ–Ω–µ—Ç (–∞–¥–º–∏–Ω) -------------------
    if context.user_data.get("awaiting_set_coins"):
        parts = txt.strip().split()
        if len(parts) != 2 or not parts[0].isdigit() or not parts[1].isdigit():
            await update.message.reply_text("‚ùå –§–æ—Ä–º–∞—Ç: user_id amount")
            return
        target_id, amount = int(parts[0]), int(parts[1])
        update_user(target_id, coins=amount)
        context.user_data["awaiting_set_coins"] = False
        await update.message.reply_text(
            f"‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {target_id} —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ {format_num(amount)}ü™ô."
        )
        return

    if context.user_data.get("awaiting_add_coins"):
        parts = txt.strip().split()
        if len(parts) != 2 or not parts[0].isdigit() or not parts[1].isdigit():
            await update.message.reply_text("‚ùå –§–æ—Ä–º–∞—Ç: user_id amount")
            return
        target_id, amount = int(parts[0]), int(parts[1])
        target_user = get_user(target_id)
        new_val = min(target_user["coins"] + amount, MAX_INT)
        update_user(target_id, coins=new_val)
        context.user_data["awaiting_add_coins"] = False
        await update.message.reply_text(
            f"‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {target_id} –¥–æ–±–∞–≤–ª–µ–Ω–æ {format_num(amount)}ü™ô."
        )
        return

    # ------------------- –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞ (–∞–¥–º–∏–Ω) -------------------
    if context.user_data.get("awaiting_create_promo"):
        parts = txt.strip().split()
        if len(parts) not in (3, 5):
            await update.message.reply_text(
                "‚ùå –§–æ—Ä–º–∞—Ç: CODE COINS [PET_FIELD PET_QTY] MAX_USES"
            )
            return
        code = parts[0].upper()
        if not parts[1].isdigit():
            await update.message.reply_text("‚ùå COINS –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —á–∏—Å–ª–æ–º.")
            return
        coins = int(parts[1])
        pet_field = None
        pet_qty = 0
        max_uses = 1
        if len(parts) == 5:
            pet_field = parts[2]
            if not parts[3].isdigit():
                await update.message.reply_text("‚ùå PET_QTY –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —á–∏—Å–ª–æ–º.")
                return
            pet_qty = int(parts[3])
            if not parts[4].isdigit():
                await update.message.reply_text("‚ùå MAX_USES –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —á–∏—Å–ª–æ–º.")
                return
            max_uses = int(parts[4])
            if pet_field not in [f for f, *_ in ANIMAL_CONFIG]:
                await update.message.reply_text("‚ùå –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –ø–∏—Ç–æ–º–µ—Ü.")
                return
        else:
            if not parts[2].isdigit():
                await update.message.reply_text("‚ùå MAX_USES –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —á–∏—Å–ª–æ–º.")
                return
            max_uses = int(parts[2])
        add_promo(code, coins, pet_field, pet_qty, max_uses)
        context.user_data["awaiting_create_promo"] = False
        await update.message.reply_text(
            f"‚úÖ –ü—Ä–æ–º–æ–∫–æ–¥ {code} —Å–æ–∑–¥–∞–Ω. –ú–æ–Ω–µ—Ç—ã: {format_num(coins)}"
            + (f", –ü–∏—Ç–æ–º–µ—Ü: {pet_field} √ó{pet_qty}" if pet_field else "")
            + f", –ú–∞–∫—Å‚Äë–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π: {max_uses}"
        )
        return

    # ------------------- –ü—Ä–æ–º–æ–∫–æ–¥ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å) -------------------
    if context.user_data.get("awaiting_promo_input"):
        await handle_promo_input(update, context)
        return

    # ------------------- –ö–∞–∑–∏–Ω–æ -------------------
    if txt.lower().startswith("/—Å—Ç–∞–≤–∫–∞"):
        numbers = re.findall(r"\d+", txt)
        if not numbers:
            await update.message.reply_text("‚ùå –£–∫–∞–∂–∏—Ç–µ —Å—É–º–º—É: /—Å—Ç–∞–≤–∫–∞ 5000")
            return
        amount = int(numbers[-1])
        db_user = get_user(user.id)
        if amount < 100:
            await update.message.reply_text("‚ùå –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞ ‚Äì 100ü™ô.")
            return
        if db_user["coins"] < amount:
            await update.message.reply_text("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç.")
            return
        if random.random() < 0.3:
            win = amount
            update_user(
                user.id,
                coins=db_user["coins"] + win,
                weekly_coins=db_user["weekly_coins"] + win,
                reputation=db_user["reputation"] + 1,
            )
            log_user_action(user.id, f"–í—ã–∏–≥—Ä–∞–ª –≤ –∫–∞–∑–∏–Ω–æ {win}ü™ô")
            await update.message.reply_text(
                f"üéâ –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏! –°—Ç–∞–≤–∫–∞ {format_num(amount)}ü™ô, –≤—ã–∏–≥—Ä—ã—à +{format_num(win)}ü™ô."
            )
        else:
            update_user(
                user.id,
                coins=db_user["coins"] - amount,
                weekly_coins=db_user["weekly_coins"] - amount,
                reputation=db_user["reputation"] - 1,
            )
            log_user_action(user.id, f"–ü—Ä–æ–∏–≥—Ä–∞–ª –≤ –∫–∞–∑–∏–Ω–æ {amount}ü™ô")
            await update.message.reply_text(f"üíî –í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ {format_num(amount)}ü™ô.")
        return

    # ------------------- –î–µ–∫–æ—Ä–∞—Ü–∏–∏ —Ñ–µ—Ä–º—ã -------------------
    if txt.lower().startswith("/–¥–µ–∫–æ—Ä"):
        parts = txt.strip().split()
        if len(parts) != 2:
            await update.message.reply_text("‚ùå –§–æ—Ä–º–∞—Ç: /–¥–µ–∫–æ—Ä <—Ç–∏–ø>")
            return
        deco_type = parts[1].lower()
        cur.execute(
            "SELECT level FROM decorations WHERE user_id = ? AND decor_type = ?",
            (user.id, deco_type),
        )
        row = cur.fetchone()
        cur_level = row["level"] if row else 0
        cost = 5000 * (cur_level + 1)
        if get_user(user.id)["coins"] < cost:
            await update.message.reply_text(
                f"‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç. –ù—É–∂–Ω–æ {format_num(cost)}ü™ô."
            )
            return
        if row:
            _execute(
                "UPDATE decorations SET level = ? WHERE user_id = ? AND decor_type = ?",
                (cur_level + 1, user.id, deco_type),
            )
        else:
            _execute(
                "INSERT INTO decorations (user_id, decor_type, level) VALUES (?,?,1)",
                (user.id, deco_type),
            )
        # –ë–æ–Ω—É—Å –∫ –¥–æ—Ö–æ–¥—É: +1% –∑–∞ –∫–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å
        bonus = int(0.01 * (cur_level + 1) * get_user(user.id)["custom_income"])
        update_user(user.id, custom_income=get_user(user.id)["custom_income"] + bonus)
        await update.message.reply_text(
            f"‚úÖ –î–µ–∫–æ—Ä–∞—Ü–∏—è ¬´{deco_type}¬ª —É–ª—É—á—à–µ–Ω–∞ –¥–æ —É—Ä–æ–≤–Ω—è {cur_level + 1}. "
            f"–ü–æ–ª—É—á–µ–Ω –±–æ–Ω—É—Å +{format_num(bonus)}ü™ô –∫ –¥–æ—Ö–æ–¥—É."
        )
        return

    # ------------------- –õ–æ—Ç–µ—Ä–µ—è -------------------
    if txt.lower().startswith("/–ª–æ—Ç–µ—Ä–µ—è"):
        parts = txt.strip().split()
        if len(parts) < 2:
            await update.message.reply_text(
                "‚ùå –§–æ—Ä–º–∞—Ç: /–ª–æ—Ç–µ—Ä–µ—è –∫—É–ø–∏—Ç—å <–∫–æ–ª-–≤–æ> | /–ª–æ—Ç–µ—Ä–µ—è —Å—ã–≥—Ä–∞—Ç—å"
            )
            return
        action = parts[1].lower()
        if action == "–∫—É–ø–∏—Ç—å":
            if len(parts) != 3 or not parts[2].isdigit():
                await update.message.reply_text("‚ùå –£–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ.")
                return
            qty = int(parts[2])
            price = 200 * qty
            u = get_user(user.id)
            if u["coins"] < price:
                await update.message.reply_text(
                    f"‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç. –ù—É–∂–Ω–æ {format_num(price)}ü™ô."
                )
                return
            update_user(user.id, coins=u["coins"] - price)
            cur.execute(
                "INSERT INTO lottery (user_id, tickets) VALUES (?,?) "
                "ON CONFLICT(user_id) DO UPDATE SET tickets = tickets + excluded.tickets",
                (user.id, qty),
            )
            conn.commit()
            await update.message.reply_text(f"‚úÖ –ö—É–ø–ª–µ–Ω–æ {qty} –ª–æ—Ç–µ—Ä–µ–π–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤.")
            return
        if action == "—Å—ã–≥—Ä–∞—Ç—å":
            cur.execute("SELECT tickets FROM lottery WHERE user_id = ?", (user.id,))
            row = cur.fetchone()
            if not row or row["tickets"] <= 0:
                await update.message.reply_text("‚ùå –£ –≤–∞—Å –Ω–µ—Ç –±–∏–ª–µ—Ç–æ–≤.")
                return
            roll = random.random()
            win = 0
            if roll < 0.10:
                win = 10_000
            elif roll < 0.15:
                win = 2_000
            cur.execute(
                "UPDATE lottery SET tickets = tickets - 1 WHERE user_id = ?",
                (user.id,),
            )
            conn.commit()
            if win:
                update_user(user.id, coins=get_user(user.id)["coins"] + win)
                await update.message.reply_text(
                    f"üéâ –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ {format_num(win)}ü™ô –≤ –ª–æ—Ç–µ—Ä–µ–µ!"
                )
            else:
                await update.message.reply_text("üíî –í—ã –Ω–µ –≤—ã–∏–≥—Ä–∞–ª–∏ –≤ —ç—Ç–æ–º —Ä–∞—É–Ω–¥–µ.")
            return

    # ------------------- –£—Å–∫–æ—Ä–∏—Ç–µ–ª–∏ -------------------
    if txt.lower().startswith("/—É—Å–∫–æ—Ä–∏—Ç–µ–ª—å"):
        parts = txt.strip().split()
        if len(parts) != 4 or parts[1].lower() != "–∫—É–ø–∏—Ç—å":
            await update.message.reply_text(
                "‚ùå –§–æ—Ä–º–∞—Ç: /—É—Å–∫–æ—Ä–∏—Ç–µ–ª—å –∫—É–ø–∏—Ç—å <–º–Ω–æ–∂–∏—Ç–µ–ª—å> <—Å–µ–∫>"
            )
            return
        try:
            mult = float(parts[2])
            secs = int(parts[3])
        except ValueError:
            await update.message.reply_text("‚ùå –ù–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.")
            return
        if mult <= 1.0 or secs <= 0:
            await update.message.reply_text("‚ùå –ú–Ω–æ–∂–∏—Ç–µ–ª—å >1 –∏ –≤—Ä–µ–º—è >0.")
            return
        price = int(5_000 * mult * secs / 60)   # –ø—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º—É–ª–∞ —Ü–µ–Ω—ã
        u = get_user(user.id)
        if u["coins"] < price:
            await update.message.reply_text(
                f"‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç. –ù—É–∂–Ω–æ {format_num(price)}ü™ô."
            )
            return
        cur.execute(
            "SELECT multiplier, expires FROM boosters WHERE user_id = ?",
            (user.id,),
        )
        row = cur.fetchone()
        now = int(time.time())
        if row:
            cur_multiplier = row["multiplier"]
            cur_expires = row["expires"]
            new_multiplier = max(cur_multiplier, mult)
            new_expires = max(cur_expires, now + secs)
            _execute(
                "UPDATE boosters SET multiplier = ?, expires = ? WHERE user_id = ?",
                (new_multiplier, new_expires, user.id),
            )
        else:
            _execute(
                "INSERT INTO boosters (user_id, multiplier, expires) VALUES (?,?,?)",
                (user.id, mult, now + secs),
            )
        update_user(user.id, coins=u["coins"] - price)
        await update.message.reply_text(
            f"‚úÖ –£—Å–∫–æ—Ä–∏—Ç–µ–ª—å √ó{mult:.1f} –∞–∫—Ç–∏–≤–µ–Ω –Ω–∞ {secs}—Å–µ–∫. –°—Ç–æ–∏–º–æ—Å—Ç—å {format_num(price)}ü™ô."
        )
        return

    # ------------------- –¢—Ä–µ–π–¥ (—É–ø—Ä–æ—â—ë–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä) -------------------
    if txt.lower().startswith("/trade"):
        await start_trade(query, context)   # —Ñ—É–Ω–∫—Ü–∏—è start_trade —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–∏–∂–µ
        return

    # ------------------- –õ—é–±–æ–π –¥—Ä—É–≥–æ–π —Ç–µ–∫—Å—Ç -------------------
    # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    return


# ----------------------------------------------------------------------
#   –¢—Ä–µ–π–¥ (—É–ø—Ä–æ—â—ë–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä)
# ----------------------------------------------------------------------
async def start_trade(query, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–ó–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Å—Ç—É—é —Å—Ö–µ–º—É —Ç—Ä–µ–π–¥–∞ ‚Äì –∑–∞–ø—Ä–æ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è."""
    context.user_data["trade_state"] = {"step": 1}
    await edit_section(
        query,
        caption="ü§ù –¢—Ä–µ–π–¥: –≤–≤–µ–¥–∏—Ç–µ ID –ø–æ–ª—É—á–∞—Ç–µ–ª—è (user_id).",
        image_key="farm",
        reply_markup=InlineKeyboardMarkup(
            [[InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="back")]]
        ),
    )


async def handle_trade_step(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ç—Ä–µ–π–¥–∞."""
    txt = update.message.text.strip()
    state = context.user_data.get("trade_state")
    if not state:
        return
    uid = update.effective_user.id
    user = get_user(uid)
    if state["step"] == 1:
        if not txt.isdigit():
            await update.message.reply_text("‚ùå –ù—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ —á–∏—Å–ª–æ–≤–æ–π ID.")
            return
        state["target_id"] = int(txt)
        state["step"] = 2
        await update.message.reply_text("üí∞ –í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏:")
        return
    if state["step"] == 2:
        if not txt.isdigit():
            await update.message.reply_text("‚ùå –í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ.")
            return
        amount = int(txt)
        if amount <= 0 or user["coins"] < amount:
            await update.message.reply_text("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç.")
            return
        target_id = state["target_id"]
        target_user = get_user(target_id)
        update_user(uid, coins=user["coins"] - amount)
        update_user(target_id, coins=target_user["coins"] + amount)
        log_user_action(uid, f"–¢—Ä–µ–π–¥: –æ—Ç–ø—Ä–∞–≤–∏–ª {amount}ü™ô –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {target_id}")
        await update.message.reply_text(
            f"‚úÖ –¢—Ä–µ–π–¥ –∑–∞–≤–µ—Ä—à—ë–Ω! –ü–µ—Ä–µ–≤–æ–¥ {format_num(amount)}ü™ô –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {target_id}."
        )
        # –û—á–∏—Å—Ç–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        context.user_data.pop("trade_state", None)


# ----------------------------------------------------------------------
#   /pets ‚Äì —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–∏—Ç–æ–º—Ü–µ–≤ (–ø–∞–≥–∏–Ω–∞—Ü–∏—è)
# ----------------------------------------------------------------------
async def pets_command(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    await render_pets_command(update.message, context, page=0)


async def pets_nav(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    query = update.callback_query
    await query.answer()
    data = query.data
    cur_page = context.user_data.get("pets_page", 0)
    if data == "pets_next":
        await render_pets_callback(query, context, page=cur_page + 1)
    elif data == "pets_prev":
        await render_pets_callback(query, context, page=max(0, cur_page - 1))


async def render_pets_command(message, context: ContextTypes.DEFAULT_TYPE, page: int = 0) -> None:
    items, total_pages = paginate_items(ANIMAL_CONFIG, page)
    lines = []
    for _, inc, emoji, name, _, price, desc in items:
        lines.append(
            f"{emoji} {name}\n–î–æ—Ö–æ–¥: {inc}ü™ô/–º–∏–Ω, —Ü–µ–Ω–∞: {format_num(price)}ü™ô\n{desc}"
        )
    text = "\n\n".join(lines)
    nav = []
    if page > 0:
        nav.append(InlineKeyboardButton("‚è™ –ü—Ä–µ–¥.", callback_data="pets_prev"))
    if page < total_pages - 1:
        nav.append(InlineKeyboardButton("–°–ª–µ–¥. ‚è©", callback_data="pets_next"))
    nav.append(InlineKeyboardButton("‚¨ÖÔ∏è –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="back"))
    kb = InlineKeyboardMarkup([nav])
    await message.reply_photo(
        MAIN_MENU_IMG,
        caption=f"üìú –ü–∏—Ç–æ–º—Ü—ã ‚Äì —Å—Ç—Ä–∞–Ω–∏—Ü–∞ {page + 1}/{total_pages}\n\n{text}",
        reply_markup=kb,
    )
    context.user_data["pets_page"] = page


async def render_pets_callback(query, context: ContextTypes.DEFAULT_TYPE, page: int = 0) -> None:
    items, total_pages = paginate_items(ANIMAL_CONFIG, page)
    lines = []
    for _, inc, emoji, name, _, price, desc in items:
        lines.append(
            f"{emoji} {name}\n–î–æ—Ö–æ–¥: {inc}ü™ô/–º–∏–Ω, —Ü–µ–Ω–∞: {format_num(price)}ü™ô\n{desc}"
        )
    text = "\n\n".join(lines)
    nav = []
    if page > 0:
        nav.append(InlineKeyboardButton("‚è™ –ü—Ä–µ–¥.", callback_data="pets_prev"))
    if page < total_pages - 1:
        nav.append(InlineKeyboardButton("–°–ª–µ–¥. ‚è©", callback_data="pets_next"))
    nav.append(InlineKeyboardButton("‚¨ÖÔ∏è –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="back"))
    kb = InlineKeyboardMarkup([nav])
    await query.edit_message_media(
        media=InputMediaPhoto(media=MAIN_MENU_IMG, caption=f"üìú –ü–∏—Ç–æ–º—Ü—ã ‚Äì —Å—Ç—Ä–∞–Ω–∏—Ü–∞ {page + 1}/{total_pages}\n\n{text}"),
        reply_markup=kb,
    )
    context.user_data["pets_page"] = page


# ----------------------------------------------------------------------
#   –ì—Ä—É–ø–ø–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã /top –∏ /stats
# ----------------------------------------------------------------------
async def top_group_handler(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–¢–æ–ø‚Äë5 —Ñ–µ—Ä–º–µ—Ä–æ–≤ –ø–æ weekly_coins (–¥–æ—Å—Ç—É–ø–Ω–æ –≤ –≥—Ä—É–ø–ø–∞—Ö)."""
    cur.execute(
        "SELECT username, weekly_coins, user_id FROM users ORDER BY weekly_coins DESC LIMIT 5"
    )
    top5 = cur.fetchall()
    if not top5:
        text = "‚ö° –ü–æ–∫–∞ –Ω–µ—Ç –∏–≥—Ä–æ–∫–æ–≤ –≤ –±–∞–∑–µ."
    else:
        text = "üèÜ –¢–æ–ø —Ñ–µ—Ä–º–µ—Ä–æ–≤ (–Ω–µ–¥–µ–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥)\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n"
        for i, row in enumerate(top5, 1):
            name = row["username"] or f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {row['user_id']}"
            text += f"{i}. {name} ‚Äî {format_num(row['weekly_coins'])}ü™ô\n"
    await update.message.reply_text(text)


async def stat_group_handler(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–≥–æ, –∫—Ç–æ –≤–≤—ë–ª –∫–æ–º–∞–Ω–¥—É –≤ –≥—Ä—É–ø–ø–µ."""
    user = update.effective_user
    db_user = get_user(user.id)
    income_min = calculate_income_per_min(db_user)
    left, season_number = get_season_info()
    h, r = divmod(left, 3600)
    m = r // 60
    text = (
        f"üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ {user.full_name or user.username or '–ò–≥—Ä–æ–∫–∞'}\n"
        f"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n"
        f"üÜî ID: {db_user['user_id']}\n"
        f"üí∞ –ú–æ–Ω–µ—Ç—ã: {format_num(db_user['coins'])}\n"
        f"üí∞ –î–æ—Ö–æ–¥ –∑–∞ –º–∏–Ω—É—Ç—É: {format_num(income_min)}ü™ô\n"
        f"üèóÔ∏è –ë–∞–∑–∞: —É—Ä–æ–≤–µ–Ω—å {db_user['base_level']} (–ª–∏–º–∏—Ç: {db_user['pet_limit']})\n"
        f"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n"
        f"üéüÔ∏è –ë–∏–ª–µ—Ç–æ–≤: {db_user['tickets']}\n"
        f"üí¨ –†–µ–ø—É—Ç–∞—Ü–∏—è: {db_user['reputation']}\n"
        f"‚ö° –¢–∏—Ç—É–ª: {get_status(db_user['coins'])}\n"
        f"üï∑Ô∏è –ü–∞—É–∫‚Äë—Å–µ–∫—Ä–µ—Ç: {'–î–∞' if db_user['secret_spider'] else '–ù–µ—Ç'}\n"
        f"üîÅ –ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–π: {db_user.get('rebirths', 0)}\n"
        f"‚è≥ –î–æ –∫–æ–Ω—Ü–∞ —Å–µ–∑–æ–Ω–∞ ‚Ññ{season_number}: {h}—á {m}–º\n"
        f"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
    )
    await update.message.reply_text(text)


# ----------------------------------------------------------------------
#   –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
# ----------------------------------------------------------------------
def main() -> None:
    parser = argparse.ArgumentParser()
    parser.add_argument(
        "--migrate", action="store_true", help="–¢–æ–ª—å–∫–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∫–æ–ª–æ–Ω–æ–∫"
    )
    args = parser.parse_args()
    init_db()
    ensure_user_columns()
    ensure_animal_columns()
    ensure_global_settings_columns()
    ensure_promo_columns()          # <-- –≤–∞–∂–Ω—ã–π –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —à–∞–≥
    if args.migrate:
        log.info("–ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –∫–æ–ª–æ–Ω–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã.")
        return
    add_admins()
    app = ApplicationBuilder().token(TOKEN).build()
    # –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
    app.add_handler(CommandHandler("start", start_command))
    app.add_handler(CommandHandler("pets", pets_command))
    # –ì—Ä—É–ø–ø–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
    app.add_handler(
        CommandHandler("top", top_group_handler, filters.ChatType.GROUPS)
    )
    app.add_handler(
        CommandHandler("stats", stat_group_handler, filters.ChatType.GROUPS)
    )
    # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä—É—Å—Å–∫–∏–µ –∞–ª–∏–∞—Å—ã
    app.add_handler(
        MessageHandler(
            filters.ChatType.GROUPS & filters.Regex(r"^/—Ç–æ–ø(@\w+)?$"),
            lambda u, c: top_group_handler(u, c),
        )
    )
    app.add_handler(
        MessageHandler(
            filters.ChatType.GROUPS & filters.Regex(r"^/—Å—Ç–∞—Ç–∞(@\w+)?$"),
            lambda u, c: stat_group_handler(u, c),
        )
    )
    # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
    app.add_handler(CallbackQueryHandler(button))
    # –ù–∞–≤–∏–≥–∞—Ü–∏—è –≤ —Å–ø–∏—Å–∫–µ –ø–∏—Ç–æ–º—Ü–µ–≤
    app.add_handler(CallbackQueryHandler(pets_nav, pattern="^pets_"))
    # –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))
    # –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
    app.job_queue.run_repeating(auto_collect, interval=60, first=10)          # –¥–æ—Ö–æ–¥ –∫–∞–∂–¥—ã–µ 1‚ÄØ–º–∏–Ω
    app.job_queue.run_repeating(check_hunger, interval=300, first=30)        # –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ–ª–æ–¥–∞
    app.job_queue.run_repeating(
        lambda _: check_and_reset_season(),
        interval=86400,
        first=5,
    )                  # –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ–∑–æ–Ω–∞
    app.run_polling()


if __name__ == "__main__":
    main()